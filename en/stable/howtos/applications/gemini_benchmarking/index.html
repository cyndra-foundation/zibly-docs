
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="index.html" rel="canonical"/>
<link href="../singlehop_testset_gen/index.html" rel="prev"/>
<link href="../../integrations/index.html" rel="next"/>
<link href="../../../static/favicon.ico" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.12+insiders-4.53.16" name="generator"/>
<title>Benchmarking Gemini models - Zibly</title>
<link href="../../../assets/stylesheets/main.ff49f96f.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.ab4e12ef.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../assets/_mkdocstrings.css" rel="stylesheet"/>
<link href="../../../extra/style.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-XWJT601CLX"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-XWJT601CLX",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-XWJT601CLX",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
<script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
<link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script><script async="" src="../../../../../static/javascript/readthedocs-addons.js" type="text/javascript"></script><meta content="zibly" name="readthedocs-project-slug"><meta content="stable" name="readthedocs-version-slug"><meta content="/howtos/applications/gemini_benchmarking/" name="readthedocs-resolver-filename"><meta content="200" name="readthedocs-http-status"/></meta></meta></meta></link></head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="index.html#benchmarking-gemini-models-using-zibly">
          Skip to content
        </a>
</div>

<div data-md-color-scheme="default" data-md-component="outdated" hidden="">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Zibly" class="md-header__button md-logo" data-md-component="logo" href="../../../index.html" title="Zibly">
<img alt="logo" src="../../../static/imgs/zibly-logo.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Zibly
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Benchmarking Gemini models
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"></path></svg>
</label>
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="zibly_light" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to system preference" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="indigo" data-md-color-scheme="zibly_dark" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to system preference">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/zibly-foundation/zibly" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    zibly-foundation/zibly
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../index.html">
</a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../getstarted/index.html">
          
  
  
    
  
  üöÄ Get Started

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../concepts/index.html">
          
  
  
    
  
  üìö Core Concepts

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../../index.html">
          
  
  
    
  
  üõ†Ô∏è How-to Guides

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../references/index.html">
          
  
  
    
  
  üìñ References

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../community/index.html">
        
  
  
    
  
  ‚ù§Ô∏è Community

      </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Zibly" class="md-nav__button md-logo" data-md-component="logo" href="../../../index.html" title="Zibly">
<img alt="logo" src="../../../static/imgs/zibly-logo.png"/>
</a>
    Zibly
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/zibly-foundation/zibly" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    zibly-foundation/zibly
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../index.html">
<span class="md-ellipsis">
</span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../getstarted/index.html">
<span class="md-ellipsis">
    
  
    üöÄ Get Started
  

    
  </span>
</a>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            
  
    üöÄ Get Started
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getstarted/install/index.html">
<span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getstarted/evals/index.html">
<span class="md-ellipsis">
    
  
    Evaluate your first LLM App
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getstarted/rag_eval/index.html">
<span class="md-ellipsis">
    
  
    Evaluate a simple RAG
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../getstarted/rag_testset_generation/index.html">
<span class="md-ellipsis">
    
  
    Generate Synthetic Testset for RAG
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../concepts/index.html">
<span class="md-ellipsis">
    
  
    üìö Core Concepts
  

    
  </span>
</a>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            
  
    üìö Core Concepts
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../concepts/components/index.html">
<span class="md-ellipsis">
    
  
    Components
  

    
  </span>
</a>
<label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Components
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_2_2" id="__nav_3_2_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    General
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_2_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_2_2">
<span class="md-nav__icon md-icon"></span>
            
  
    General
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/components/prompt/index.html">
<span class="md-ellipsis">
    
  
    Prompt
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_2_3" id="__nav_3_2_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Evaluation
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_2_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_2_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Evaluation
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/components/eval_sample/index.html">
<span class="md-ellipsis">
    
  
    Evaluation Sample
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/components/eval_dataset/index.html">
<span class="md-ellipsis">
    
  
    Evaluation Dataset
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../concepts/metrics/index.html">
<span class="md-ellipsis">
    
  
    Metrics
  

    
  </span>
</a>
<label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Metrics
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/overview/index.html">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_3_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/index.html">
<span class="md-ellipsis">
    
  
    Available Metrics
  

    
  </span>
</a>
<label class="md-nav__link" for="__nav_3_3_3" id="__nav_3_3_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_3_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_3_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Available Metrics
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_3_3_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_2" id="__nav_3_3_3_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Retrieval Augmented Generation
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_3_3_2_label" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_3_3_3_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Retrieval Augmented Generation
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/context_precision/index.html">
<span class="md-ellipsis">
    
  
    Context Precision
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/context_recall/index.html">
<span class="md-ellipsis">
    
  
    Context Recall
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/context_entities_recall/index.html">
<span class="md-ellipsis">
    
  
    Context Entities Recall
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/noise_sensitivity/index.html">
<span class="md-ellipsis">
    
  
    Noise Sensitivity
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/answer_relevance/index.html">
<span class="md-ellipsis">
    
  
    Response Relevancy
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/faithfulness/index.html">
<span class="md-ellipsis">
    
  
    Faithfulness
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_3_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_3" id="__nav_3_3_3_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Nvidia Metrics
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_3_3_3_label" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_3_3_3_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Nvidia Metrics
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/nvidia_metrics/index.html#answer-accuracy">
<span class="md-ellipsis">
    
  
    Answer Accuracy
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/nvidia_metrics/index.html#context-relevance">
<span class="md-ellipsis">
    
  
    Context Relevance
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/nvidia_metrics/index.html#response-groundedness">
<span class="md-ellipsis">
    
  
    Response Groundedness
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_3_3_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_4" id="__nav_3_3_3_4_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Agents or Tool Use Cases
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_3_3_4_label" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_3_3_3_4">
<span class="md-nav__icon md-icon"></span>
            
  
    Agents or Tool Use Cases
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/agents/index.html">
<span class="md-ellipsis">
    
  
    Agentic or Tool use
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/agents/index.html#topic-adherence">
<span class="md-ellipsis">
    
  
    Topic Adherence
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/agents/index.html#tool-call-accuracy">
<span class="md-ellipsis">
    
  
    Tool Call Accuracy
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/agents/index.html#agent-goal-accuracy">
<span class="md-ellipsis">
    
  
    Agent Goal Accuracy
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_3_3_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_5" id="__nav_3_3_3_5_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Natural Language Comparison
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_3_3_5_label" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_3_3_3_5">
<span class="md-nav__icon md-icon"></span>
            
  
    Natural Language Comparison
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/factual_correctness/index.html">
<span class="md-ellipsis">
    
  
    Factual Correctness
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/semantic_similarity/index.html">
<span class="md-ellipsis">
    
  
    Semantic Similarity
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_3_3_5_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_5_3" id="__nav_3_3_3_5_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Traditional non LLM metrics
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_3_3_5_3_label" class="md-nav" data-md-level="5">
<label class="md-nav__title" for="__nav_3_3_3_5_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Traditional non LLM metrics
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/traditional/index.html">
<span class="md-ellipsis">
    
  
    Traditional NLP Metrics
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/traditional/index.html#non-llm-string-similarity">
<span class="md-ellipsis">
    
  
    Non LLM String Similarity
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/traditional/index.html#bleu-score">
<span class="md-ellipsis">
    
  
    BLEU Score
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/traditional/index.html#rouge-score">
<span class="md-ellipsis">
    
  
    ROUGE Score
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/traditional/index.html#string-presence">
<span class="md-ellipsis">
    
  
    String Presence
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/traditional/index.html#exact-match">
<span class="md-ellipsis">
    
  
    Exact Match
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_3_3_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_6" id="__nav_3_3_3_6_label" tabindex="0">
<span class="md-ellipsis">
    
  
    SQL
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_3_3_6_label" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_3_3_3_6">
<span class="md-nav__icon md-icon"></span>
            
  
    SQL
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/sql/index.html">
<span class="md-ellipsis">
    
  
    SQL
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/sql/index.html#execution-based-metrics">
<span class="md-ellipsis">
    
  
    Execution based Datacompy Score
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/sql/index.html#sql-query-semantic-equivalence">
<span class="md-ellipsis">
    
  
    SQL Query Equivalence
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_3_3_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_7" id="__nav_3_3_3_7_label" tabindex="0">
<span class="md-ellipsis">
    
  
    General Purpose
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_3_3_7_label" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_3_3_3_7">
<span class="md-nav__icon md-icon"></span>
            
  
    General Purpose
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/general_purpose/index.html">
<span class="md-ellipsis">
    
  
    General Purpose Metrics
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/general_purpose/index.html#aspect-critic">
<span class="md-ellipsis">
    
  
    Aspect Critic
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/general_purpose/index.html#simple-criteria-scoring">
<span class="md-ellipsis">
    
  
    Simple Criteria Scoring
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/general_purpose/index.html#rubrics-based-criteria-scoring">
<span class="md-ellipsis">
    
  
    Rubrics Based Scoring
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/general_purpose/index.html#instance-specific-rubrics-criteria-scoring">
<span class="md-ellipsis">
    
  
    Instance Specific Rubrics Scoring
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_3_3_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3_3_8" id="__nav_3_3_3_8_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Other Tasks
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_3_3_8_label" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_3_3_3_8">
<span class="md-nav__icon md-icon"></span>
            
  
    Other Tasks
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/metrics/available_metrics/summarization_score/index.html">
<span class="md-ellipsis">
    
  
    Summarization
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../concepts/test_data_generation/index.html">
<span class="md-ellipsis">
    
  
    Test Data Generation
  

    
  </span>
</a>
<label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_4">
<span class="md-nav__icon md-icon"></span>
            
  
    Test Data Generation
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_4_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_4_2" id="__nav_3_4_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    RAG
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_4_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_4_2">
<span class="md-nav__icon md-icon"></span>
            
  
    RAG
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/test_data_generation/rag/index.html">
<span class="md-ellipsis">
    
  
    Testset Generation for RAG
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/test_data_generation/rag/index.html#knowledge-graph-creation">
<span class="md-ellipsis">
    
  
    KG Building
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/test_data_generation/rag/index.html#scenario-generation">
<span class="md-ellipsis">
    
  
    Scenario Generation
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_4_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_4_3" id="__nav_3_4_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Agents or tool use
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_4_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_4_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Agents or tool use
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/test_data_generation/agents/index.html">
<span class="md-ellipsis">
    
  
    Testset Generation for Agents or Tool use cases
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_5" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../concepts/feedback/index.html">
<span class="md-ellipsis">
    
  
    Feedback Intelligence
  

    
  </span>
</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_5">
<span class="md-nav__icon md-icon"></span>
            
  
    Feedback Intelligence
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../index.html">
<span class="md-ellipsis">
    
  
    üõ†Ô∏è How-to Guides
  

    
  </span>
</a>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            
  
    üõ†Ô∏è How-to Guides
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../customizations/index.html">
<span class="md-ellipsis">
    
  
    Customizations
  

    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Customizations
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2_2" id="__nav_4_2_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    General
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_2_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_2_2">
<span class="md-nav__icon md-icon"></span>
            
  
    General
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../customizations/customize_models/index.html">
<span class="md-ellipsis">
    
  
    Customise models
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../customizations/_run_config/index.html">
<span class="md-ellipsis">
    
  
    Run Config
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../customizations/_caching/index.html">
<span class="md-ellipsis">
    
  
    Caching
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2_3" id="__nav_4_2_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Metrics
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_2_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_2_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Metrics
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../customizations/metrics/_modifying-prompts-metrics/index.html">
<span class="md-ellipsis">
    
  
    Modify Prompts
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../customizations/metrics/_metrics_language_adaptation/index.html">
<span class="md-ellipsis">
    
  
    Adapt Metrics to Languages
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../customizations/metrics/_write_your_own_metric/index.html">
<span class="md-ellipsis">
    
  
    Write your own Metrics
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../customizations/metrics/_write_your_own_metric_advanced/index.html">
<span class="md-ellipsis">
    
  
    Write your own Metrics - (advanced)
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2_4" id="__nav_4_2_4_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Testset Generation
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_2_4_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_2_4">
<span class="md-nav__icon md-icon"></span>
            
  
    Testset Generation
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../customizations/testgenerator/_language_adaptation/index.html">
<span class="md-ellipsis">
    
  
    Non-English Testset Generation
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../customizations/testgenerator/_persona_generator/index.html">
<span class="md-ellipsis">
    
  
    Persona Generation
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../customizations/testgenerator/_testgen-custom-single-hop/index.html">
<span class="md-ellipsis">
    
  
    Custom Single-hop Query
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../customizations/testgenerator/_testgen-customisation/index.html">
<span class="md-ellipsis">
    
  
    Custom Multi-hop Query
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_4_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../index.html">
<span class="md-ellipsis">
    
  
    Applications
  

    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_4_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Applications
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_3_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_3_2" id="__nav_4_3_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Metrics
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_3_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_3_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Metrics
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../_cost/index.html">
<span class="md-ellipsis">
    
  
    Cost Analysis
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../evaluating_multi_turn_conversations/index.html">
<span class="md-ellipsis">
    
  
    Evaluating Multi-turn Conversations
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../vertexai_x_zibly/index.html">
<span class="md-ellipsis">
    
  
    Evaluations with Vertex AI models
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_3_3" id="__nav_4_3_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Testset Generation
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_3_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_3_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Testset Generation
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../singlehop_testset_gen/index.html">
<span class="md-ellipsis">
    
  
    Single-hop Query Testset
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_4_3_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_3_4" id="__nav_4_3_4_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Benchmarking
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_4_3_4_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_4_3_4">
<span class="md-nav__icon md-icon"></span>
            
  
    Benchmarking
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    
  
    Benchmarking Gemini models
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="index.html">
<span class="md-ellipsis">
    
  
    Benchmarking Gemini models
  

    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#about-the-dataset">
<span class="md-ellipsis">
      
        About the Dataset
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#loading-dataset">
<span class="md-ellipsis">
      
        Loading Dataset
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#processing-dataset">
<span class="md-ellipsis">
      
        Processing Dataset
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#generating-responses-from-gemini-models">
<span class="md-ellipsis">
      
        Generating Responses from Gemini Models
      
    </span>
</a>
<nav aria-label="Generating Responses from Gemini Models" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#gemini-20-falsh">
<span class="md-ellipsis">
      
        Gemini 2.0 Falsh
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#gemini-15-falsh">
<span class="md-ellipsis">
      
        Gemini 1.5 Falsh
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#defining-metrics-for-evaluation">
<span class="md-ellipsis">
      
        Defining Metrics For Evaluation
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#benchmarking-on-zibly-metrics">
<span class="md-ellipsis">
      
        Benchmarking on Zibly Metrics
      
    </span>
</a>
<nav aria-label="Benchmarking on Zibly Metrics" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#gemini-20-falsh_1">
<span class="md-ellipsis">
      
        Gemini 2.0 Falsh
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#gemini-15-flash">
<span class="md-ellipsis">
      
        Gemini 1.5 Flash
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#comparing-the-results">
<span class="md-ellipsis">
      
        Comparing the Results
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#whats-next">
<span class="md-ellipsis">
      
        What's Next
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../integrations/index.html">
<span class="md-ellipsis">
    
  
    Integrations
  

    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_4">
<span class="md-nav__icon md-icon"></span>
            
  
    Integrations
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../integrations/_arize/index.html">
<span class="md-ellipsis">
    
  
    Arize
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../integrations/amazon_bedrock/index.html">
<span class="md-ellipsis">
    
  
    Amazon Bedrock
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../integrations/haystack/index.html">
<span class="md-ellipsis">
    
  
    Haystack
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../integrations/griptape/index.html">
<span class="md-ellipsis">
    
  
    Griptape
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../integrations/langchain/index.html">
<span class="md-ellipsis">
    
  
    LangChain
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../integrations/_langgraph_agent_evaluation/index.html">
<span class="md-ellipsis">
    
  
    LangGraph
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../integrations/langsmith/index.html">
<span class="md-ellipsis">
    
  
    LangSmith
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../integrations/_llamaindex/index.html">
<span class="md-ellipsis">
    
  
    LlamaIndex
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../integrations/llama_stack/index.html">
<span class="md-ellipsis">
    
  
    LlamaStack
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../integrations/r2r/index.html">
<span class="md-ellipsis">
    
  
    R2R
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../integrations/swarm_agent_evaluation/index.html">
<span class="md-ellipsis">
    
  
    Swarm
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="">
<span class="md-ellipsis">
    
  
    Migrations
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_5">
<span class="md-nav__icon md-icon"></span>
            
  
    Migrations
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../migrations/migrate_from_v01_to_v02/index.html">
<span class="md-ellipsis">
    
  
    From v0.1 to v0.2
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../references/index.html">
<span class="md-ellipsis">
    
  
    üìñ References
  

    
  </span>
</a>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            
  
    üìñ References
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Core
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Core
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../references/prompt/index.html">
<span class="md-ellipsis">
    
  
    Prompt
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../references/llms/index.html">
<span class="md-ellipsis">
    
  
    LLMs
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../references/embeddings/index.html">
<span class="md-ellipsis">
    
  
    Embeddings
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../references/run_config/index.html">
<span class="md-ellipsis">
    
  
    RunConfig
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../references/executor/index.html">
<span class="md-ellipsis">
    
  
    Executor
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../references/cache/index.html">
<span class="md-ellipsis">
    
  
    Cache
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Evaluation
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Evaluation
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../references/evaluation_schema/index.html">
<span class="md-ellipsis">
    
  
    Schemas
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../references/metrics/index.html">
<span class="md-ellipsis">
    
  
    Metrics
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../references/evaluate/index.html">
<span class="md-ellipsis">
    
  
    evaluate()
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Testset Generation
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_4">
<span class="md-nav__icon md-icon"></span>
            
  
    Testset Generation
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../references/testset_schema/index.html">
<span class="md-ellipsis">
    
  
    Schemas
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../references/graph/index.html">
<span class="md-ellipsis">
    
  
    Graph
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../references/transforms/index.html">
<span class="md-ellipsis">
    
  
    Transforms
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../references/synthesizers/index.html">
<span class="md-ellipsis">
    
  
    Synthesizers
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../references/generate/index.html">
<span class="md-ellipsis">
    
  
    Generation
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../references/integrations/index.html">
<span class="md-ellipsis">
    
  
    Integrations
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../community/index.html">
<span class="md-ellipsis">
    
  
    ‚ù§Ô∏è Community
  

    
  </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#about-the-dataset">
<span class="md-ellipsis">
      
        About the Dataset
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#loading-dataset">
<span class="md-ellipsis">
      
        Loading Dataset
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#processing-dataset">
<span class="md-ellipsis">
      
        Processing Dataset
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#generating-responses-from-gemini-models">
<span class="md-ellipsis">
      
        Generating Responses from Gemini Models
      
    </span>
</a>
<nav aria-label="Generating Responses from Gemini Models" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#gemini-20-falsh">
<span class="md-ellipsis">
      
        Gemini 2.0 Falsh
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#gemini-15-falsh">
<span class="md-ellipsis">
      
        Gemini 1.5 Falsh
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#defining-metrics-for-evaluation">
<span class="md-ellipsis">
      
        Defining Metrics For Evaluation
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#benchmarking-on-zibly-metrics">
<span class="md-ellipsis">
      
        Benchmarking on Zibly Metrics
      
    </span>
</a>
<nav aria-label="Benchmarking on Zibly Metrics" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#gemini-20-falsh_1">
<span class="md-ellipsis">
      
        Gemini 2.0 Falsh
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#gemini-15-flash">
<span class="md-ellipsis">
      
        Gemini 1.5 Flash
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#comparing-the-results">
<span class="md-ellipsis">
      
        Comparing the Results
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="index.html#whats-next">
<span class="md-ellipsis">
      
        What's Next
      
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<nav aria-label="Navigation" class="md-path">
<ol class="md-path__list">
<li class="md-path__item">
<a class="md-path__link" href="../../../index.html">
<span class="md-ellipsis">
</span>
</a>
</li>
<li class="md-path__item">
<a class="md-path__link" href="../../index.html">
<span class="md-ellipsis">
    üõ†Ô∏è How-to Guides
  </span>
</a>
</li>
<li class="md-path__item">
<a class="md-path__link" href="../index.html">
<span class="md-ellipsis">
    Applications
  </span>
</a>
</li>
<li class="md-path__item">
<a class="md-path__link" href="index.html">
<span class="md-ellipsis">
    Benchmarking
  </span>
</a>
</li>
</ol>
</nav>
<article class="md-content__inner md-typeset">
<h1 id="benchmarking-gemini-models-using-zibly">Benchmarking Gemini Models using Zibly</h1>
<p>In this tutorial, we'll benchmark Gemini models on the AllenAI's QASPER dataset using Zibly metrics for the Academic Question Answering task.</p>
<h3 id="about-the-dataset">About the Dataset</h3>
<p>QASPER (Question Answering over Scientific Papers) is a dataset consisting of 5,049 questions based on 1,585 NLP research papers. Annotators created these questions from titles and abstracts, a different set of annotators answered them from the full paper texts.</p>
<p>Data Collection Process:  </p>
<ol>
<li>Paper Selection: NLP domain papers from arXiv (LaTeX format) were selected from the S2ORC corpus.</li>
<li>Question Writing: Annotators wrote realistic, information-seeking questions based only on paper titles and abstracts.</li>
<li>Answer Annotation: Different annotators reviewed the entire paper to identify answers, selecting minimal relevant evidence (texts, tables, figures).</li>
</ol>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="../../../static/qasper_data_collection.png"><img alt="Data collection Process of QASPER Dataset" src="../../../static/qasper_data_collection.png"/></a></p>
<p>Link to the <a href="https://huggingface.co/datasets/allenai/qasper">Dataset</a> and further details about QASPER can be found <a href="https://huggingface.co/datasets/allenai/qasper">here</a>. </p>
<h2 id="loading-dataset">Loading Dataset</h2>
<p>For demonstration purposes, we'll use a subset of 10 examples from the validation split:</p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a href="index.html#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">datasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_dataset</span>
</span><span id="__span-0-2"><a href="index.html#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
</span><span id="__span-0-3"><a href="index.html#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
</span><span id="__span-0-4"><a href="index.html#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">tqdm.auto</span><span class="w"> </span><span class="kn">import</span> <span class="n">tqdm</span>
</span><span id="__span-0-5"><a href="index.html#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a>
</span><span id="__span-0-6"><a href="index.html#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="n">dataset</span> <span class="o">=</span> <span class="n">load_dataset</span><span class="p">(</span><span class="s2">"allenai/qasper"</span><span class="p">,</span> <span class="n">split</span><span class="o">=</span><span class="s2">"validation[:10]"</span><span class="p">)</span>
</span><span id="__span-0-7"><a href="index.html#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="n">dataset</span>
</span></code></pre></div>
Output
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a href="index.html#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a>Dataset({
</span><span id="__span-1-2"><a href="index.html#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a>    features: ['id', 'title', 'abstract', 'full_text', 'qas', 'figures_and_tables'],
</span><span id="__span-1-3"><a href="index.html#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a>    num_rows: 10
</span><span id="__span-1-4"><a href="index.html#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a>})
</span></code></pre></div></p>
<h2 id="processing-dataset">Processing Dataset</h2>
<p>Since our goal is to benchmark the model‚Äôs performance on academic question-answering tasks, we need answers generated by LLMs based on the entire text of each research paper. We extract the full text from the dataset‚Äôs "full_text" column and format it into markdown, clearly organizing it into sections and paragraphs for improved readability and context.</p>
<p>To create question-answer pairs for evaluation, we use the dataset‚Äôs "qas" column. This column provides questions paired with answers in one of three formats: extractive spans, yes/no responses, or free-form answers. We then combine these into a single "golden answer" column, which serves as the ground truth for assessing model performance.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a href="index.html#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">convert_full_text_to_markdown</span><span class="p">(</span><span class="n">full_text_dict</span><span class="p">):</span>
</span><span id="__span-2-2"><a href="index.html#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="w">    </span><span class="sd">"""</span>
</span><span id="__span-2-3"><a href="index.html#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="sd">    Converts a full_text dictionary into a markdown-formatted string.</span>
</span><span id="__span-2-4"><a href="index.html#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a>
</span><span id="__span-2-5"><a href="index.html#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="sd">    Expected keys:</span>
</span><span id="__span-2-6"><a href="index.html#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="sd">      - "section_name": list of section titles.</span>
</span><span id="__span-2-7"><a href="index.html#__codelineno-2-7" id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="sd">      - "paragraphs": list of lists of paragraphs corresponding to each section.</span>
</span><span id="__span-2-8"><a href="index.html#__codelineno-2-8" id="__codelineno-2-8" name="__codelineno-2-8"></a>
</span><span id="__span-2-9"><a href="index.html#__codelineno-2-9" id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="sd">    Each section becomes a markdown header (##) followed by its paragraphs.</span>
</span><span id="__span-2-10"><a href="index.html#__codelineno-2-10" id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="sd">    """</span>
</span><span id="__span-2-11"><a href="index.html#__codelineno-2-11" id="__codelineno-2-11" name="__codelineno-2-11"></a>    <span class="n">sections</span> <span class="o">=</span> <span class="n">full_text_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"section_name"</span><span class="p">,</span> <span class="p">[])</span>
</span><span id="__span-2-12"><a href="index.html#__codelineno-2-12" id="__codelineno-2-12" name="__codelineno-2-12"></a>    <span class="n">paragraphs</span> <span class="o">=</span> <span class="n">full_text_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"paragraphs"</span><span class="p">,</span> <span class="p">[])</span>
</span><span id="__span-2-13"><a href="index.html#__codelineno-2-13" id="__codelineno-2-13" name="__codelineno-2-13"></a>
</span><span id="__span-2-14"><a href="index.html#__codelineno-2-14" id="__codelineno-2-14" name="__codelineno-2-14"></a>    <span class="n">markdown_lines</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-2-15"><a href="index.html#__codelineno-2-15" id="__codelineno-2-15" name="__codelineno-2-15"></a>    <span class="k">for</span> <span class="n">section</span><span class="p">,</span> <span class="n">paragraph</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sections</span><span class="p">,</span> <span class="n">paragraphs</span><span class="p">):</span>
</span><span id="__span-2-16"><a href="index.html#__codelineno-2-16" id="__codelineno-2-16" name="__codelineno-2-16"></a>        <span class="n">markdown_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"## </span><span class="si">{</span><span class="n">section</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span><span id="__span-2-17"><a href="index.html#__codelineno-2-17" id="__codelineno-2-17" name="__codelineno-2-17"></a>        <span class="n">markdown_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span>  <span class="c1"># Blank line</span>
</span><span id="__span-2-18"><a href="index.html#__codelineno-2-18" id="__codelineno-2-18" name="__codelineno-2-18"></a>        <span class="n">markdown_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">paragraph</span><span class="p">)))</span>
</span><span id="__span-2-19"><a href="index.html#__codelineno-2-19" id="__codelineno-2-19" name="__codelineno-2-19"></a>        <span class="n">markdown_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span>  <span class="c1"># End of section</span>
</span><span id="__span-2-20"><a href="index.html#__codelineno-2-20" id="__codelineno-2-20" name="__codelineno-2-20"></a>        <span class="n">markdown_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span>  <span class="c1"># Extra blank line for separation</span>
</span><span id="__span-2-21"><a href="index.html#__codelineno-2-21" id="__codelineno-2-21" name="__codelineno-2-21"></a>    <span class="k">return</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">markdown_lines</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a href="index.html#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">combine_responses</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
</span><span id="__span-3-2"><a href="index.html#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">    </span><span class="sd">"""</span>
</span><span id="__span-3-3"><a href="index.html#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="sd">    Combines 'extractive_spans', 'yes_no', and 'free_form_answer'</span>
</span><span id="__span-3-4"><a href="index.html#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="sd">    into one single string. Skips components that are missing.</span>
</span><span id="__span-3-5"><a href="index.html#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="sd">    """</span>
</span><span id="__span-3-6"><a href="index.html#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a>    <span class="n">responses</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-3-7"><a href="index.html#__codelineno-3-7" id="__codelineno-3-7" name="__codelineno-3-7"></a>    <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">notna</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"extractive_spans"</span><span class="p">)):</span>
</span><span id="__span-3-8"><a href="index.html#__codelineno-3-8" id="__codelineno-3-8" name="__codelineno-3-8"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">"extractive_spans"</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="__span-3-9"><a href="index.html#__codelineno-3-9" id="__codelineno-3-9" name="__codelineno-3-9"></a>            <span class="n">responses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">" "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="s2">"extractive_spans"</span><span class="p">])))</span>
</span><span id="__span-3-10"><a href="index.html#__codelineno-3-10" id="__codelineno-3-10" name="__codelineno-3-10"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-3-11"><a href="index.html#__codelineno-3-11" id="__codelineno-3-11" name="__codelineno-3-11"></a>            <span class="n">responses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">"extractive_spans"</span><span class="p">]))</span>
</span><span id="__span-3-12"><a href="index.html#__codelineno-3-12" id="__codelineno-3-12" name="__codelineno-3-12"></a>    <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">notna</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"yes_no"</span><span class="p">)):</span>
</span><span id="__span-3-13"><a href="index.html#__codelineno-3-13" id="__codelineno-3-13" name="__codelineno-3-13"></a>        <span class="n">responses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">"yes_no"</span><span class="p">]))</span>
</span><span id="__span-3-14"><a href="index.html#__codelineno-3-14" id="__codelineno-3-14" name="__codelineno-3-14"></a>    <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">notna</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"free_form_answer"</span><span class="p">)):</span>
</span><span id="__span-3-15"><a href="index.html#__codelineno-3-15" id="__codelineno-3-15" name="__codelineno-3-15"></a>        <span class="n">responses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">"free_form_answer"</span><span class="p">]))</span>
</span><span id="__span-3-16"><a href="index.html#__codelineno-3-16" id="__codelineno-3-16" name="__codelineno-3-16"></a>    <span class="k">return</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">responses</span><span class="p">)</span> <span class="k">if</span> <span class="n">responses</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</span></code></pre></div>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a href="index.html#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">preprocess_hf_dataset</span><span class="p">(</span><span class="n">hf_ds</span><span class="p">):</span>
</span><span id="__span-4-2"><a href="index.html#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="w">    </span><span class="sd">"""</span>
</span><span id="__span-4-3"><a href="index.html#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="sd">    Processes a HuggingFace dataset split into a cleaned Pandas DataFrame.</span>
</span><span id="__span-4-4"><a href="index.html#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a>
</span><span id="__span-4-5"><a href="index.html#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="sd">    Steps:</span>
</span><span id="__span-4-6"><a href="index.html#__codelineno-4-6" id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="sd">      1. For each sample, convert 'full_text' to a markdown string.</span>
</span><span id="__span-4-7"><a href="index.html#__codelineno-4-7" id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="sd">      2. For every QA pair in the sample, extract the question and first answer.</span>
</span><span id="__span-4-8"><a href="index.html#__codelineno-4-8" id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="sd">      3. Build lists for answers, questions, and full_text (duplicated per question).</span>
</span><span id="__span-4-9"><a href="index.html#__codelineno-4-9" id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="sd">      4. Create a DataFrame from the collected data.</span>
</span><span id="__span-4-10"><a href="index.html#__codelineno-4-10" id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="sd">      5. Clean columns by replacing empty lists/strings with NaN and joining lists.</span>
</span><span id="__span-4-11"><a href="index.html#__codelineno-4-11" id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="sd">      6. Combine the answer components into a single 'golden response'.</span>
</span><span id="__span-4-12"><a href="index.html#__codelineno-4-12" id="__codelineno-4-12" name="__codelineno-4-12"></a>
</span><span id="__span-4-13"><a href="index.html#__codelineno-4-13" id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="sd">    The function uses nested tqdm progress bars for real-time feedback.</span>
</span><span id="__span-4-14"><a href="index.html#__codelineno-4-14" id="__codelineno-4-14" name="__codelineno-4-14"></a>
</span><span id="__span-4-15"><a href="index.html#__codelineno-4-15" id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="sd">    Returns:</span>
</span><span id="__span-4-16"><a href="index.html#__codelineno-4-16" id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="sd">        pd.DataFrame: The preprocessed DataFrame.</span>
</span><span id="__span-4-17"><a href="index.html#__codelineno-4-17" id="__codelineno-4-17" name="__codelineno-4-17"></a><span class="sd">    """</span>
</span><span id="__span-4-18"><a href="index.html#__codelineno-4-18" id="__codelineno-4-18" name="__codelineno-4-18"></a>    <span class="n">answers_list</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Stores the first answer for each question</span>
</span><span id="__span-4-19"><a href="index.html#__codelineno-4-19" id="__codelineno-4-19" name="__codelineno-4-19"></a>    <span class="n">questions_list</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Stores each question text</span>
</span><span id="__span-4-20"><a href="index.html#__codelineno-4-20" id="__codelineno-4-20" name="__codelineno-4-20"></a>    <span class="n">full_text_list</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Stores the formatted full text per QA pair</span>
</span><span id="__span-4-21"><a href="index.html#__codelineno-4-21" id="__codelineno-4-21" name="__codelineno-4-21"></a>
</span><span id="__span-4-22"><a href="index.html#__codelineno-4-22" id="__codelineno-4-22" name="__codelineno-4-22"></a>    <span class="c1"># Outer loop: iterate over samples with progress bar</span>
</span><span id="__span-4-23"><a href="index.html#__codelineno-4-23" id="__codelineno-4-23" name="__codelineno-4-23"></a>    <span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">hf_ds</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s2">"Processing samples"</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">"sample"</span><span class="p">):</span>
</span><span id="__span-4-24"><a href="index.html#__codelineno-4-24" id="__codelineno-4-24" name="__codelineno-4-24"></a>        <span class="c1"># Convert full text once per sample</span>
</span><span id="__span-4-25"><a href="index.html#__codelineno-4-25" id="__codelineno-4-25" name="__codelineno-4-25"></a>        <span class="n">formatted_text</span> <span class="o">=</span> <span class="n">convert_full_text_to_markdown</span><span class="p">(</span><span class="n">sample</span><span class="p">[</span><span class="s2">"full_text"</span><span class="p">])</span>
</span><span id="__span-4-26"><a href="index.html#__codelineno-4-26" id="__codelineno-4-26" name="__codelineno-4-26"></a>        <span class="c1"># Create a list of QA pairs</span>
</span><span id="__span-4-27"><a href="index.html#__codelineno-4-27" id="__codelineno-4-27" name="__codelineno-4-27"></a>        <span class="n">qa_pairs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">sample</span><span class="p">[</span><span class="s2">"qas"</span><span class="p">][</span><span class="s2">"question"</span><span class="p">],</span> <span class="n">sample</span><span class="p">[</span><span class="s2">"qas"</span><span class="p">][</span><span class="s2">"answers"</span><span class="p">]))</span>
</span><span id="__span-4-28"><a href="index.html#__codelineno-4-28" id="__codelineno-4-28" name="__codelineno-4-28"></a>
</span><span id="__span-4-29"><a href="index.html#__codelineno-4-29" id="__codelineno-4-29" name="__codelineno-4-29"></a>        <span class="c1"># Inner loop: iterate over each QA pair with its own progress bar</span>
</span><span id="__span-4-30"><a href="index.html#__codelineno-4-30" id="__codelineno-4-30" name="__codelineno-4-30"></a>        <span class="k">for</span> <span class="n">question</span><span class="p">,</span> <span class="n">answer_set</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span>
</span><span id="__span-4-31"><a href="index.html#__codelineno-4-31" id="__codelineno-4-31" name="__codelineno-4-31"></a>            <span class="n">qa_pairs</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s2">"Processing QAs"</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">qa_pairs</span><span class="p">),</span> <span class="n">leave</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">"qa"</span>
</span><span id="__span-4-32"><a href="index.html#__codelineno-4-32" id="__codelineno-4-32" name="__codelineno-4-32"></a>        <span class="p">):</span>
</span><span id="__span-4-33"><a href="index.html#__codelineno-4-33" id="__codelineno-4-33" name="__codelineno-4-33"></a>            <span class="n">answers_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">answer_set</span><span class="p">[</span><span class="s2">"answer"</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</span><span id="__span-4-34"><a href="index.html#__codelineno-4-34" id="__codelineno-4-34" name="__codelineno-4-34"></a>            <span class="n">questions_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">question</span><span class="p">)</span>
</span><span id="__span-4-35"><a href="index.html#__codelineno-4-35" id="__codelineno-4-35" name="__codelineno-4-35"></a>            <span class="n">full_text_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">formatted_text</span><span class="p">)</span>
</span><span id="__span-4-36"><a href="index.html#__codelineno-4-36" id="__codelineno-4-36" name="__codelineno-4-36"></a>
</span><span id="__span-4-37"><a href="index.html#__codelineno-4-37" id="__codelineno-4-37" name="__codelineno-4-37"></a>    <span class="c1"># Create DataFrame from the collected data</span>
</span><span id="__span-4-38"><a href="index.html#__codelineno-4-38" id="__codelineno-4-38" name="__codelineno-4-38"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">answers_list</span><span class="p">)</span>
</span><span id="__span-4-39"><a href="index.html#__codelineno-4-39" id="__codelineno-4-39" name="__codelineno-4-39"></a>    <span class="n">df</span><span class="p">[</span><span class="s2">"question"</span><span class="p">]</span> <span class="o">=</span> <span class="n">questions_list</span>
</span><span id="__span-4-40"><a href="index.html#__codelineno-4-40" id="__codelineno-4-40" name="__codelineno-4-40"></a>    <span class="n">df</span><span class="p">[</span><span class="s2">"full_text"</span><span class="p">]</span> <span class="o">=</span> <span class="n">full_text_list</span>
</span><span id="__span-4-41"><a href="index.html#__codelineno-4-41" id="__codelineno-4-41" name="__codelineno-4-41"></a>
</span><span id="__span-4-42"><a href="index.html#__codelineno-4-42" id="__codelineno-4-42" name="__codelineno-4-42"></a>    <span class="c1"># Data Cleaning: Replace empty lists/strings with NaN and join lists if needed</span>
</span><span id="__span-4-43"><a href="index.html#__codelineno-4-43" id="__codelineno-4-43" name="__codelineno-4-43"></a>    <span class="n">df</span><span class="p">[</span><span class="s2">"extractive_spans"</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">"extractive_spans"</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
</span><span id="__span-4-44"><a href="index.html#__codelineno-4-44" id="__codelineno-4-44" name="__codelineno-4-44"></a>        <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">x</span>
</span><span id="__span-4-45"><a href="index.html#__codelineno-4-45" id="__codelineno-4-45" name="__codelineno-4-45"></a>    <span class="p">)</span>
</span><span id="__span-4-46"><a href="index.html#__codelineno-4-46" id="__codelineno-4-46" name="__codelineno-4-46"></a>    <span class="n">df</span><span class="p">[</span><span class="s2">"free_form_answer"</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">"free_form_answer"</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
</span><span id="__span-4-47"><a href="index.html#__codelineno-4-47" id="__codelineno-4-47" name="__codelineno-4-47"></a>        <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s2">""</span> <span class="k">else</span> <span class="n">x</span>
</span><span id="__span-4-48"><a href="index.html#__codelineno-4-48" id="__codelineno-4-48" name="__codelineno-4-48"></a>    <span class="p">)</span>
</span><span id="__span-4-49"><a href="index.html#__codelineno-4-49" id="__codelineno-4-49" name="__codelineno-4-49"></a>    <span class="n">df</span><span class="p">[</span><span class="s2">"yes_no"</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">"yes_no"</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">x</span><span class="p">)</span>
</span><span id="__span-4-50"><a href="index.html#__codelineno-4-50" id="__codelineno-4-50" name="__codelineno-4-50"></a>    <span class="n">df</span><span class="p">[</span><span class="s2">"extractive_spans"</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">"extractive_spans"</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
</span><span id="__span-4-51"><a href="index.html#__codelineno-4-51" id="__codelineno-4-51" name="__codelineno-4-51"></a>        <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="k">else</span> <span class="n">x</span>
</span><span id="__span-4-52"><a href="index.html#__codelineno-4-52" id="__codelineno-4-52" name="__codelineno-4-52"></a>    <span class="p">)</span>
</span><span id="__span-4-53"><a href="index.html#__codelineno-4-53" id="__codelineno-4-53" name="__codelineno-4-53"></a>
</span><span id="__span-4-54"><a href="index.html#__codelineno-4-54" id="__codelineno-4-54" name="__codelineno-4-54"></a>    <span class="c1"># Combine the answer components into a single 'golden response'</span>
</span><span id="__span-4-55"><a href="index.html#__codelineno-4-55" id="__codelineno-4-55" name="__codelineno-4-55"></a>    <span class="n">df</span><span class="p">[</span><span class="s2">"golden response"</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">combine_responses</span><span class="p">(</span><span class="n">row</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-4-56"><a href="index.html#__codelineno-4-56" id="__codelineno-4-56" name="__codelineno-4-56"></a>
</span><span id="__span-4-57"><a href="index.html#__codelineno-4-57" id="__codelineno-4-57" name="__codelineno-4-57"></a>    <span class="k">return</span> <span class="n">df</span>
</span></code></pre></div>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a href="index.html#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="n">processed_dataset</span> <span class="o">=</span> <span class="n">preprocess_hf_dataset</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</span><span id="__span-5-2"><a href="index.html#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="n">processed_dataset</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a href="index.html#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a>Processing samples: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 10/10 [00:00&lt;00:00, 208.37sample/s]
</span></code></pre></div></p>
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1">
<thead>
<tr style="text-align: right;">
<th></th>
<th>unanswerable</th>
<th>extractive_spans</th>
<th>yes_no</th>
<th>free_form_answer</th>
<th>evidence</th>
<th>highlighted_evidence</th>
<th>question</th>
<th>full_text</th>
<th>golden response</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>False</td>
<td>BIBREF19\nBIBREF20</td>
<td>NaN</td>
<td>NaN</td>
<td>[Table TABREF19 and TABREF26 report zero-shot ...</td>
<td>[We compare our approaches with related approa...</td>
<td>which multilingual approaches do they compare ...</td>
<td>## Introduction\n\nAlthough Neural Machine Tra...</td>
<td>BIBREF19\nBIBREF20</td>
</tr>
<tr>
<th>1</th>
<td>False</td>
<td>pivoting\npivoting$_{\rm m}$</td>
<td>NaN</td>
<td>NaN</td>
<td>[Table TABREF19 and TABREF26 report zero-shot ...</td>
<td>[We compare our approaches with related approa...</td>
<td>what are the pivot-based baselines?</td>
<td>## Introduction\n\nAlthough Neural Machine Tra...</td>
<td>pivoting\npivoting$_{\rm m}$</td>
</tr>
<tr>
<th>2</th>
<td>False</td>
<td>Europarl\nMultiUN</td>
<td>NaN</td>
<td>NaN</td>
<td>[We evaluate our cross-lingual pre-training ba...</td>
<td>[We evaluate our cross-lingual pre-training ba...</td>
<td>which datasets did they experiment with?</td>
<td>## Introduction\n\nAlthough Neural Machine Tra...</td>
<td>Europarl\nMultiUN</td>
</tr>
<tr>
<th>3</th>
<td>False</td>
<td>NaN</td>
<td>NaN</td>
<td>De-En, En-Fr, Fr-En, En-Es, Ro-En, En-De, Ar-E...</td>
<td>[For MultiUN corpus, we use four languages: En...</td>
<td>[For MultiUN corpus, we use four languages: En...</td>
<td>what language pairs are explored?</td>
<td>## Introduction\n\nAlthough Neural Machine Tra...</td>
<td>De-En, En-Fr, Fr-En, En-Es, Ro-En, En-De, Ar-E...</td>
</tr>
<tr>
<th>4</th>
<td>False</td>
<td>Stanford NER\nspaCy 2.0 \nrecurrent model with...</td>
<td>NaN</td>
<td>NaN</td>
<td>[In this section we describe a number of exper...</td>
<td>[In this section we describe a number of exper...</td>
<td>what ner models were evaluated?</td>
<td>## Introduction\n\nNamed entity recognition is...</td>
<td>Stanford NER\nspaCy 2.0 \nrecurrent model with...</td>
</tr>
</tbody>
</table>
</div>
<h2 id="generating-responses-from-gemini-models">Generating Responses from Gemini Models</h2>
<p>To generate responses using the Gemini model, we‚Äôll first need to instantiate the Google GenAI client. We will define a prompt template that will be used when generating responses.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a href="index.html#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
</span><span id="__span-7-2"><a href="index.html#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">google</span><span class="w"> </span><span class="kn">import</span> <span class="n">genai</span>
</span><span id="__span-7-3"><a href="index.html#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">dotenv</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_dotenv</span>
</span><span id="__span-7-4"><a href="index.html#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a>
</span><span id="__span-7-5"><a href="index.html#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="n">load_dotenv</span><span class="p">()</span>
</span><span id="__span-7-6"><a href="index.html#__codelineno-7-6" id="__codelineno-7-6" name="__codelineno-7-6"></a>
</span><span id="__span-7-7"><a href="index.html#__codelineno-7-7" id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="n">client</span> <span class="o">=</span> <span class="n">genai</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">"GOOGLE_API_KEY"</span><span class="p">))</span>
</span><span id="__span-7-8"><a href="index.html#__codelineno-7-8" id="__codelineno-7-8" name="__codelineno-7-8"></a>
</span><span id="__span-7-9"><a href="index.html#__codelineno-7-9" id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="n">qa_prompt</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="__span-7-10"><a href="index.html#__codelineno-7-10" id="__codelineno-7-10" name="__codelineno-7-10"></a>    <span class="sa">f</span><span class="s2">"Context information is below.</span><span class="se">\n</span><span class="s2">"</span>
</span><span id="__span-7-11"><a href="index.html#__codelineno-7-11" id="__codelineno-7-11" name="__codelineno-7-11"></a>    <span class="s2">"---------------------</span><span class="se">\n</span><span class="s2">"</span>
</span><span id="__span-7-12"><a href="index.html#__codelineno-7-12" id="__codelineno-7-12" name="__codelineno-7-12"></a>    <span class="s2">"</span><span class="si">{context_str}</span><span class="se">\n</span><span class="s2">"</span>
</span><span id="__span-7-13"><a href="index.html#__codelineno-7-13" id="__codelineno-7-13" name="__codelineno-7-13"></a>    <span class="s2">"---------------------</span><span class="se">\n</span><span class="s2">"</span>
</span><span id="__span-7-14"><a href="index.html#__codelineno-7-14" id="__codelineno-7-14" name="__codelineno-7-14"></a>    <span class="s2">"Given the context information and not prior knowledge, "</span>
</span><span id="__span-7-15"><a href="index.html#__codelineno-7-15" id="__codelineno-7-15" name="__codelineno-7-15"></a>    <span class="s2">"answer the query.</span><span class="se">\n</span><span class="s2">"</span>
</span><span id="__span-7-16"><a href="index.html#__codelineno-7-16" id="__codelineno-7-16" name="__codelineno-7-16"></a>    <span class="s2">"If you cannot find answer to the query, just say that it cannot be answered.</span><span class="se">\n</span><span class="s2">"</span>
</span><span id="__span-7-17"><a href="index.html#__codelineno-7-17" id="__codelineno-7-17" name="__codelineno-7-17"></a>    <span class="s2">"Query: </span><span class="si">{query_str}</span><span class="se">\n</span><span class="s2">"</span>
</span><span id="__span-7-18"><a href="index.html#__codelineno-7-18" id="__codelineno-7-18" name="__codelineno-7-18"></a>    <span class="s2">"Answer: "</span>
</span><span id="__span-7-19"><a href="index.html#__codelineno-7-19" id="__codelineno-7-19" name="__codelineno-7-19"></a><span class="p">)</span>
</span></code></pre></div>
<h3 id="gemini-20-falsh">Gemini 2.0 Falsh</h3>
<details class="note">
<summary>Code for AsyncExecutor</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a href="index.html#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="c1"># async_executor.py</span>
</span><span id="__span-8-2"><a href="index.html#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotations</span>
</span><span id="__span-8-3"><a href="index.html#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
</span><span id="__span-8-4"><a href="index.html#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
</span><span id="__span-8-5"><a href="index.html#__codelineno-8-5" id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
</span><span id="__span-8-6"><a href="index.html#__codelineno-8-6" id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Tuple</span>
</span><span id="__span-8-7"><a href="index.html#__codelineno-8-7" id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span><span class="p">,</span> <span class="n">field</span>
</span><span id="__span-8-8"><a href="index.html#__codelineno-8-8" id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="kn">import</span><span class="w"> </span><span class="nn">nest_asyncio</span>
</span><span id="__span-8-9"><a href="index.html#__codelineno-8-9" id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="kn">from</span><span class="w"> </span><span class="nn">tqdm</span><span class="w"> </span><span class="kn">import</span> <span class="n">tqdm</span>
</span><span id="__span-8-10"><a href="index.html#__codelineno-8-10" id="__codelineno-8-10" name="__codelineno-8-10"></a>
</span><span id="__span-8-11"><a href="index.html#__codelineno-8-11" id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="c1"># Apply nest_asyncio to allow nested event loops (e.g., in Jupyter)</span>
</span><span id="__span-8-12"><a href="index.html#__codelineno-8-12" id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="n">nest_asyncio</span><span class="o">.</span><span class="n">apply</span><span class="p">()</span>
</span><span id="__span-8-13"><a href="index.html#__codelineno-8-13" id="__codelineno-8-13" name="__codelineno-8-13"></a>
</span><span id="__span-8-14"><a href="index.html#__codelineno-8-14" id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="__span-8-15"><a href="index.html#__codelineno-8-15" id="__codelineno-8-15" name="__codelineno-8-15"></a>
</span><span id="__span-8-16"><a href="index.html#__codelineno-8-16" id="__codelineno-8-16" name="__codelineno-8-16"></a>
</span><span id="__span-8-17"><a href="index.html#__codelineno-8-17" id="__codelineno-8-17" name="__codelineno-8-17"></a><span class="k">def</span><span class="w"> </span><span class="nf">is_event_loop_running</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="__span-8-18"><a href="index.html#__codelineno-8-18" id="__codelineno-8-18" name="__codelineno-8-18"></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-8-19"><a href="index.html#__codelineno-8-19" id="__codelineno-8-19" name="__codelineno-8-19"></a>        <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_running_loop</span><span class="p">()</span>
</span><span id="__span-8-20"><a href="index.html#__codelineno-8-20" id="__codelineno-8-20" name="__codelineno-8-20"></a>    <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
</span><span id="__span-8-21"><a href="index.html#__codelineno-8-21" id="__codelineno-8-21" name="__codelineno-8-21"></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="__span-8-22"><a href="index.html#__codelineno-8-22" id="__codelineno-8-22" name="__codelineno-8-22"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-8-23"><a href="index.html#__codelineno-8-23" id="__codelineno-8-23" name="__codelineno-8-23"></a>        <span class="k">return</span> <span class="n">loop</span><span class="o">.</span><span class="n">is_running</span><span class="p">()</span>
</span><span id="__span-8-24"><a href="index.html#__codelineno-8-24" id="__codelineno-8-24" name="__codelineno-8-24"></a>
</span><span id="__span-8-25"><a href="index.html#__codelineno-8-25" id="__codelineno-8-25" name="__codelineno-8-25"></a>
</span><span id="__span-8-26"><a href="index.html#__codelineno-8-26" id="__codelineno-8-26" name="__codelineno-8-26"></a><span class="k">class</span><span class="w"> </span><span class="nc">RateLimiter</span><span class="p">:</span>
</span><span id="__span-8-27"><a href="index.html#__codelineno-8-27" id="__codelineno-8-27" name="__codelineno-8-27"></a><span class="w">    </span><span class="sd">"""</span>
</span><span id="__span-8-28"><a href="index.html#__codelineno-8-28" id="__codelineno-8-28" name="__codelineno-8-28"></a><span class="sd">    An asynchronous rate limiter that enforces a minimum interval between calls.</span>
</span><span id="__span-8-29"><a href="index.html#__codelineno-8-29" id="__codelineno-8-29" name="__codelineno-8-29"></a><span class="sd">    For example, with max_calls_per_minute=1250, it ensures that calls are spaced by ~0.048 seconds.</span>
</span><span id="__span-8-30"><a href="index.html#__codelineno-8-30" id="__codelineno-8-30" name="__codelineno-8-30"></a><span class="sd">    """</span>
</span><span id="__span-8-31"><a href="index.html#__codelineno-8-31" id="__codelineno-8-31" name="__codelineno-8-31"></a>
</span><span id="__span-8-32"><a href="index.html#__codelineno-8-32" id="__codelineno-8-32" name="__codelineno-8-32"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_calls_per_minute</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="__span-8-33"><a href="index.html#__codelineno-8-33" id="__codelineno-8-33" name="__codelineno-8-33"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">interval</span> <span class="o">=</span> <span class="mf">60.0</span> <span class="o">/</span> <span class="n">max_calls_per_minute</span>
</span><span id="__span-8-34"><a href="index.html#__codelineno-8-34" id="__codelineno-8-34" name="__codelineno-8-34"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_call</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="__span-8-35"><a href="index.html#__codelineno-8-35" id="__codelineno-8-35" name="__codelineno-8-35"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">lock</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
</span><span id="__span-8-36"><a href="index.html#__codelineno-8-36" id="__codelineno-8-36" name="__codelineno-8-36"></a>
</span><span id="__span-8-37"><a href="index.html#__codelineno-8-37" id="__codelineno-8-37" name="__codelineno-8-37"></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">acquire</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-8-38"><a href="index.html#__codelineno-8-38" id="__codelineno-8-38" name="__codelineno-8-38"></a>        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
</span><span id="__span-8-39"><a href="index.html#__codelineno-8-39" id="__codelineno-8-39" name="__codelineno-8-39"></a>            <span class="n">now</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">monotonic</span><span class="p">()</span>
</span><span id="__span-8-40"><a href="index.html#__codelineno-8-40" id="__codelineno-8-40" name="__codelineno-8-40"></a>            <span class="n">elapsed</span> <span class="o">=</span> <span class="n">now</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_call</span>
</span><span id="__span-8-41"><a href="index.html#__codelineno-8-41" id="__codelineno-8-41" name="__codelineno-8-41"></a>            <span class="n">wait_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interval</span> <span class="o">-</span> <span class="n">elapsed</span>
</span><span id="__span-8-42"><a href="index.html#__codelineno-8-42" id="__codelineno-8-42" name="__codelineno-8-42"></a>            <span class="k">if</span> <span class="n">wait_time</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-8-43"><a href="index.html#__codelineno-8-43" id="__codelineno-8-43" name="__codelineno-8-43"></a>                <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">wait_time</span><span class="p">)</span>
</span><span id="__span-8-44"><a href="index.html#__codelineno-8-44" id="__codelineno-8-44" name="__codelineno-8-44"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">last_call</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">monotonic</span><span class="p">()</span>
</span><span id="__span-8-45"><a href="index.html#__codelineno-8-45" id="__codelineno-8-45" name="__codelineno-8-45"></a>
</span><span id="__span-8-46"><a href="index.html#__codelineno-8-46" id="__codelineno-8-46" name="__codelineno-8-46"></a>
</span><span id="__span-8-47"><a href="index.html#__codelineno-8-47" id="__codelineno-8-47" name="__codelineno-8-47"></a><span class="nd">@dataclass</span>
</span><span id="__span-8-48"><a href="index.html#__codelineno-8-48" id="__codelineno-8-48" name="__codelineno-8-48"></a><span class="k">class</span><span class="w"> </span><span class="nc">AsyncExecutor</span><span class="p">:</span>
</span><span id="__span-8-49"><a href="index.html#__codelineno-8-49" id="__codelineno-8-49" name="__codelineno-8-49"></a><span class="w">    </span><span class="sd">"""</span>
</span><span id="__span-8-50"><a href="index.html#__codelineno-8-50" id="__codelineno-8-50" name="__codelineno-8-50"></a><span class="sd">    An asynchronous executor similar in usage to the one in the evaluate function.</span>
</span><span id="__span-8-51"><a href="index.html#__codelineno-8-51" id="__codelineno-8-51" name="__codelineno-8-51"></a>
</span><span id="__span-8-52"><a href="index.html#__codelineno-8-52" id="__codelineno-8-52" name="__codelineno-8-52"></a><span class="sd">    Attributes:</span>
</span><span id="__span-8-53"><a href="index.html#__codelineno-8-53" id="__codelineno-8-53" name="__codelineno-8-53"></a><span class="sd">        desc: Description for the progress bar.</span>
</span><span id="__span-8-54"><a href="index.html#__codelineno-8-54" id="__codelineno-8-54" name="__codelineno-8-54"></a><span class="sd">        show_progress: Whether to display a progress bar.</span>
</span><span id="__span-8-55"><a href="index.html#__codelineno-8-55" id="__codelineno-8-55" name="__codelineno-8-55"></a><span class="sd">        raise_exceptions: Whether to propagate exceptions.</span>
</span><span id="__span-8-56"><a href="index.html#__codelineno-8-56" id="__codelineno-8-56" name="__codelineno-8-56"></a><span class="sd">        max_calls_per_minute: API rate limit to enforce.</span>
</span><span id="__span-8-57"><a href="index.html#__codelineno-8-57" id="__codelineno-8-57" name="__codelineno-8-57"></a><span class="sd">    """</span>
</span><span id="__span-8-58"><a href="index.html#__codelineno-8-58" id="__codelineno-8-58" name="__codelineno-8-58"></a>
</span><span id="__span-8-59"><a href="index.html#__codelineno-8-59" id="__codelineno-8-59" name="__codelineno-8-59"></a>    <span class="n">desc</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"Evaluating"</span>
</span><span id="__span-8-60"><a href="index.html#__codelineno-8-60" id="__codelineno-8-60" name="__codelineno-8-60"></a>    <span class="n">show_progress</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-8-61"><a href="index.html#__codelineno-8-61" id="__codelineno-8-61" name="__codelineno-8-61"></a>    <span class="n">raise_exceptions</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-8-62"><a href="index.html#__codelineno-8-62" id="__codelineno-8-62" name="__codelineno-8-62"></a>    <span class="n">max_calls_per_minute</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1250</span>
</span><span id="__span-8-63"><a href="index.html#__codelineno-8-63" id="__codelineno-8-63" name="__codelineno-8-63"></a>    <span class="n">jobs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="nb">tuple</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
</span><span id="__span-8-64"><a href="index.html#__codelineno-8-64" id="__codelineno-8-64" name="__codelineno-8-64"></a>        <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span> <span class="nb">repr</span><span class="o">=</span><span class="kc">False</span>
</span><span id="__span-8-65"><a href="index.html#__codelineno-8-65" id="__codelineno-8-65" name="__codelineno-8-65"></a>    <span class="p">)</span>
</span><span id="__span-8-66"><a href="index.html#__codelineno-8-66" id="__codelineno-8-66" name="__codelineno-8-66"></a>    <span class="n">job_counter</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-8-67"><a href="index.html#__codelineno-8-67" id="__codelineno-8-67" name="__codelineno-8-67"></a>    <span class="n">rate_limiter</span><span class="p">:</span> <span class="n">RateLimiter</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="__span-8-68"><a href="index.html#__codelineno-8-68" id="__codelineno-8-68" name="__codelineno-8-68"></a>
</span><span id="__span-8-69"><a href="index.html#__codelineno-8-69" id="__codelineno-8-69" name="__codelineno-8-69"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-8-70"><a href="index.html#__codelineno-8-70" id="__codelineno-8-70" name="__codelineno-8-70"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rate_limiter</span> <span class="o">=</span> <span class="n">RateLimiter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_calls_per_minute</span><span class="p">)</span>
</span><span id="__span-8-71"><a href="index.html#__codelineno-8-71" id="__codelineno-8-71" name="__codelineno-8-71"></a>
</span><span id="__span-8-72"><a href="index.html#__codelineno-8-72" id="__codelineno-8-72" name="__codelineno-8-72"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">wrap_callable_with_index</span><span class="p">(</span>
</span><span id="__span-8-73"><a href="index.html#__codelineno-8-73" id="__codelineno-8-73" name="__codelineno-8-73"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="__span-8-74"><a href="index.html#__codelineno-8-74" id="__codelineno-8-74" name="__codelineno-8-74"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="__span-8-75"><a href="index.html#__codelineno-8-75" id="__codelineno-8-75" name="__codelineno-8-75"></a><span class="w">        </span><span class="sd">"""</span>
</span><span id="__span-8-76"><a href="index.html#__codelineno-8-76" id="__codelineno-8-76" name="__codelineno-8-76"></a><span class="sd">        Wraps an asynchronous callable so that it enforces the rate limit,</span>
</span><span id="__span-8-77"><a href="index.html#__codelineno-8-77" id="__codelineno-8-77" name="__codelineno-8-77"></a><span class="sd">        and if an error occurs, it waits for an increasing delay (fallback)</span>
</span><span id="__span-8-78"><a href="index.html#__codelineno-8-78" id="__codelineno-8-78" name="__codelineno-8-78"></a><span class="sd">        before retrying the function call indefinitely.</span>
</span><span id="__span-8-79"><a href="index.html#__codelineno-8-79" id="__codelineno-8-79" name="__codelineno-8-79"></a><span class="sd">        """</span>
</span><span id="__span-8-80"><a href="index.html#__codelineno-8-80" id="__codelineno-8-80" name="__codelineno-8-80"></a>        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wrapped</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="__span-8-81"><a href="index.html#__codelineno-8-81" id="__codelineno-8-81" name="__codelineno-8-81"></a>            <span class="n">retry_delay</span> <span class="o">=</span> <span class="mi">10</span>  <span class="c1"># initial delay in seconds</span>
</span><span id="__span-8-82"><a href="index.html#__codelineno-8-82" id="__codelineno-8-82" name="__codelineno-8-82"></a>            <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="__span-8-83"><a href="index.html#__codelineno-8-83" id="__codelineno-8-83" name="__codelineno-8-83"></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="__span-8-84"><a href="index.html#__codelineno-8-84" id="__codelineno-8-84" name="__codelineno-8-84"></a>                    <span class="c1"># Enforce the API rate limit before executing the function</span>
</span><span id="__span-8-85"><a href="index.html#__codelineno-8-85" id="__codelineno-8-85" name="__codelineno-8-85"></a>                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">rate_limiter</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
</span><span id="__span-8-86"><a href="index.html#__codelineno-8-86" id="__codelineno-8-86" name="__codelineno-8-86"></a>                    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="__span-8-87"><a href="index.html#__codelineno-8-87" id="__codelineno-8-87" name="__codelineno-8-87"></a>                    <span class="k">return</span> <span class="n">index</span><span class="p">,</span> <span class="n">result</span>
</span><span id="__span-8-88"><a href="index.html#__codelineno-8-88" id="__codelineno-8-88" name="__codelineno-8-88"></a>                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-8-89"><a href="index.html#__codelineno-8-89" id="__codelineno-8-89" name="__codelineno-8-89"></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">raise_exceptions</span><span class="p">:</span>
</span><span id="__span-8-90"><a href="index.html#__codelineno-8-90" id="__codelineno-8-90" name="__codelineno-8-90"></a>                        <span class="k">raise</span> <span class="n">e</span>
</span><span id="__span-8-91"><a href="index.html#__codelineno-8-91" id="__codelineno-8-91" name="__codelineno-8-91"></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-8-92"><a href="index.html#__codelineno-8-92" id="__codelineno-8-92" name="__codelineno-8-92"></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
</span><span id="__span-8-93"><a href="index.html#__codelineno-8-93" id="__codelineno-8-93" name="__codelineno-8-93"></a>                            <span class="s2">"Error in job </span><span class="si">%d</span><span class="s2">: </span><span class="si">%s</span><span class="s2">. Retrying in </span><span class="si">%d</span><span class="s2"> seconds..."</span><span class="p">,</span>
</span><span id="__span-8-94"><a href="index.html#__codelineno-8-94" id="__codelineno-8-94" name="__codelineno-8-94"></a>                            <span class="n">index</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">retry_delay</span>
</span><span id="__span-8-95"><a href="index.html#__codelineno-8-95" id="__codelineno-8-95" name="__codelineno-8-95"></a>                        <span class="p">)</span>
</span><span id="__span-8-96"><a href="index.html#__codelineno-8-96" id="__codelineno-8-96" name="__codelineno-8-96"></a>                        <span class="c1"># Wait asynchronously before retrying</span>
</span><span id="__span-8-97"><a href="index.html#__codelineno-8-97" id="__codelineno-8-97" name="__codelineno-8-97"></a>                        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">retry_delay</span><span class="p">)</span>
</span><span id="__span-8-98"><a href="index.html#__codelineno-8-98" id="__codelineno-8-98" name="__codelineno-8-98"></a>                        <span class="n">retry_delay</span> <span class="o">+=</span> <span class="mi">5</span>  <span class="c1"># Increase delay for subsequent retries</span>
</span><span id="__span-8-99"><a href="index.html#__codelineno-8-99" id="__codelineno-8-99" name="__codelineno-8-99"></a>        <span class="k">return</span> <span class="n">wrapped</span>
</span><span id="__span-8-100"><a href="index.html#__codelineno-8-100" id="__codelineno-8-100" name="__codelineno-8-100"></a>
</span><span id="__span-8-101"><a href="index.html#__codelineno-8-101" id="__codelineno-8-101" name="__codelineno-8-101"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">submit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-8-102"><a href="index.html#__codelineno-8-102" id="__codelineno-8-102" name="__codelineno-8-102"></a><span class="w">        </span><span class="sd">"""</span>
</span><span id="__span-8-103"><a href="index.html#__codelineno-8-103" id="__codelineno-8-103" name="__codelineno-8-103"></a><span class="sd">        Submit an asynchronous job to the executor.</span>
</span><span id="__span-8-104"><a href="index.html#__codelineno-8-104" id="__codelineno-8-104" name="__codelineno-8-104"></a><span class="sd">        """</span>
</span><span id="__span-8-105"><a href="index.html#__codelineno-8-105" id="__codelineno-8-105" name="__codelineno-8-105"></a>        <span class="n">wrapped_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_callable_with_index</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">job_counter</span><span class="p">)</span>
</span><span id="__span-8-106"><a href="index.html#__codelineno-8-106" id="__codelineno-8-106" name="__codelineno-8-106"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">jobs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">wrapped_func</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">job_counter</span><span class="p">))</span>
</span><span id="__span-8-107"><a href="index.html#__codelineno-8-107" id="__codelineno-8-107" name="__codelineno-8-107"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">job_counter</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-8-108"><a href="index.html#__codelineno-8-108" id="__codelineno-8-108" name="__codelineno-8-108"></a>
</span><span id="__span-8-109"><a href="index.html#__codelineno-8-109" id="__codelineno-8-109" name="__codelineno-8-109"></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_run_jobs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
</span><span id="__span-8-110"><a href="index.html#__codelineno-8-110" id="__codelineno-8-110" name="__codelineno-8-110"></a>        <span class="n">tasks</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-8-111"><a href="index.html#__codelineno-8-111" id="__codelineno-8-111" name="__codelineno-8-111"></a>        <span class="c1"># Create asyncio tasks for each job</span>
</span><span id="__span-8-112"><a href="index.html#__codelineno-8-112" id="__codelineno-8-112" name="__codelineno-8-112"></a>        <span class="k">for</span> <span class="n">wrapped_func</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">,</span> <span class="n">index</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">jobs</span><span class="p">:</span>
</span><span id="__span-8-113"><a href="index.html#__codelineno-8-113" id="__codelineno-8-113" name="__codelineno-8-113"></a>            <span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">wrapped_func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)))</span>
</span><span id="__span-8-114"><a href="index.html#__codelineno-8-114" id="__codelineno-8-114" name="__codelineno-8-114"></a>
</span><span id="__span-8-115"><a href="index.html#__codelineno-8-115" id="__codelineno-8-115" name="__codelineno-8-115"></a>        <span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">tasks</span><span class="p">)</span>
</span><span id="__span-8-116"><a href="index.html#__codelineno-8-116" id="__codelineno-8-116" name="__codelineno-8-116"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_progress</span><span class="p">:</span>
</span><span id="__span-8-117"><a href="index.html#__codelineno-8-117" id="__codelineno-8-117" name="__codelineno-8-117"></a>            <span class="n">pbar</span> <span class="o">=</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">total</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">tasks</span><span class="p">),</span> <span class="n">desc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">desc</span><span class="p">)</span>
</span><span id="__span-8-118"><a href="index.html#__codelineno-8-118" id="__codelineno-8-118" name="__codelineno-8-118"></a>            <span class="k">for</span> <span class="n">completed</span> <span class="ow">in</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">as_completed</span><span class="p">(</span><span class="n">tasks</span><span class="p">):</span>
</span><span id="__span-8-119"><a href="index.html#__codelineno-8-119" id="__codelineno-8-119" name="__codelineno-8-119"></a>                <span class="n">index</span><span class="p">,</span> <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">completed</span>
</span><span id="__span-8-120"><a href="index.html#__codelineno-8-120" id="__codelineno-8-120" name="__codelineno-8-120"></a>                <span class="n">results</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
</span><span id="__span-8-121"><a href="index.html#__codelineno-8-121" id="__codelineno-8-121" name="__codelineno-8-121"></a>                <span class="n">pbar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-8-122"><a href="index.html#__codelineno-8-122" id="__codelineno-8-122" name="__codelineno-8-122"></a>            <span class="n">pbar</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-8-123"><a href="index.html#__codelineno-8-123" id="__codelineno-8-123" name="__codelineno-8-123"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-8-124"><a href="index.html#__codelineno-8-124" id="__codelineno-8-124" name="__codelineno-8-124"></a>            <span class="k">for</span> <span class="n">completed</span> <span class="ow">in</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">as_completed</span><span class="p">(</span><span class="n">tasks</span><span class="p">):</span>
</span><span id="__span-8-125"><a href="index.html#__codelineno-8-125" id="__codelineno-8-125" name="__codelineno-8-125"></a>                <span class="n">index</span><span class="p">,</span> <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">completed</span>
</span><span id="__span-8-126"><a href="index.html#__codelineno-8-126" id="__codelineno-8-126" name="__codelineno-8-126"></a>                <span class="n">results</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
</span><span id="__span-8-127"><a href="index.html#__codelineno-8-127" id="__codelineno-8-127" name="__codelineno-8-127"></a>        <span class="k">return</span> <span class="n">results</span>
</span><span id="__span-8-128"><a href="index.html#__codelineno-8-128" id="__codelineno-8-128" name="__codelineno-8-128"></a>
</span><span id="__span-8-129"><a href="index.html#__codelineno-8-129" id="__codelineno-8-129" name="__codelineno-8-129"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">results</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
</span><span id="__span-8-130"><a href="index.html#__codelineno-8-130" id="__codelineno-8-130" name="__codelineno-8-130"></a><span class="w">        </span><span class="sd">"""</span>
</span><span id="__span-8-131"><a href="index.html#__codelineno-8-131" id="__codelineno-8-131" name="__codelineno-8-131"></a><span class="sd">        Execute all submitted asynchronous jobs and return their results</span>
</span><span id="__span-8-132"><a href="index.html#__codelineno-8-132" id="__codelineno-8-132" name="__codelineno-8-132"></a><span class="sd">        in the order they were submitted.</span>
</span><span id="__span-8-133"><a href="index.html#__codelineno-8-133" id="__codelineno-8-133" name="__codelineno-8-133"></a>
</span><span id="__span-8-134"><a href="index.html#__codelineno-8-134" id="__codelineno-8-134" name="__codelineno-8-134"></a><span class="sd">        Thanks to nest_asyncio, this method can be used inside a Jupyter Notebook.</span>
</span><span id="__span-8-135"><a href="index.html#__codelineno-8-135" id="__codelineno-8-135" name="__codelineno-8-135"></a><span class="sd">        """</span>
</span><span id="__span-8-136"><a href="index.html#__codelineno-8-136" id="__codelineno-8-136" name="__codelineno-8-136"></a>        <span class="c1"># If an event loop is already running, nest_asyncio allows asyncio.run() to work.</span>
</span><span id="__span-8-137"><a href="index.html#__codelineno-8-137" id="__codelineno-8-137" name="__codelineno-8-137"></a>        <span class="k">return</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_run_jobs</span><span class="p">())</span>
</span></code></pre></div>
</details>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><a href="index.html#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">async_executor</span><span class="w"> </span><span class="kn">import</span> <span class="n">AsyncExecutor</span>
</span><span id="__span-9-2"><a href="index.html#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a>
</span><span id="__span-9-3"><a href="index.html#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query_gemini_2</span><span class="p">(</span><span class="n">query_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">context_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-9-4"><a href="index.html#__codelineno-9-4" id="__codelineno-9-4" name="__codelineno-9-4"></a>    <span class="n">formatted_prompt</span> <span class="o">=</span> <span class="n">qa_prompt</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">context_str</span><span class="o">=</span><span class="n">context_str</span><span class="p">,</span> <span class="n">query_str</span><span class="o">=</span><span class="n">query_str</span><span class="p">)</span>
</span><span id="__span-9-5"><a href="index.html#__codelineno-9-5" id="__codelineno-9-5" name="__codelineno-9-5"></a>    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">aio</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content</span><span class="p">(</span>
</span><span id="__span-9-6"><a href="index.html#__codelineno-9-6" id="__codelineno-9-6" name="__codelineno-9-6"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">"gemini-2.0-flash"</span><span class="p">,</span> <span class="n">contents</span><span class="o">=</span><span class="n">formatted_prompt</span>
</span><span id="__span-9-7"><a href="index.html#__codelineno-9-7" id="__codelineno-9-7" name="__codelineno-9-7"></a>    <span class="p">)</span>
</span><span id="__span-9-8"><a href="index.html#__codelineno-9-8" id="__codelineno-9-8" name="__codelineno-9-8"></a>    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span>
</span><span id="__span-9-9"><a href="index.html#__codelineno-9-9" id="__codelineno-9-9" name="__codelineno-9-9"></a>
</span><span id="__span-9-10"><a href="index.html#__codelineno-9-10" id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="c1"># Create an instance of the asynchronous executor</span>
</span><span id="__span-9-11"><a href="index.html#__codelineno-9-11" id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="n">executor</span> <span class="o">=</span> <span class="n">AsyncExecutor</span><span class="p">(</span>
</span><span id="__span-9-12"><a href="index.html#__codelineno-9-12" id="__codelineno-9-12" name="__codelineno-9-12"></a>    <span class="n">desc</span><span class="o">=</span><span class="s2">"LLM Processing"</span><span class="p">,</span>
</span><span id="__span-9-13"><a href="index.html#__codelineno-9-13" id="__codelineno-9-13" name="__codelineno-9-13"></a>    <span class="n">show_progress</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="__span-9-14"><a href="index.html#__codelineno-9-14" id="__codelineno-9-14" name="__codelineno-9-14"></a>    <span class="n">raise_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="__span-9-15"><a href="index.html#__codelineno-9-15" id="__codelineno-9-15" name="__codelineno-9-15"></a><span class="p">)</span>
</span><span id="__span-9-16"><a href="index.html#__codelineno-9-16" id="__codelineno-9-16" name="__codelineno-9-16"></a>
</span><span id="__span-9-17"><a href="index.html#__codelineno-9-17" id="__codelineno-9-17" name="__codelineno-9-17"></a><span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">processed_dataset</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="__span-9-18"><a href="index.html#__codelineno-9-18" id="__codelineno-9-18" name="__codelineno-9-18"></a>    <span class="n">query</span> <span class="o">=</span> <span class="n">processed_dataset</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="s2">"question"</span><span class="p">]</span>
</span><span id="__span-9-19"><a href="index.html#__codelineno-9-19" id="__codelineno-9-19" name="__codelineno-9-19"></a>    <span class="n">context</span> <span class="o">=</span> <span class="n">processed_dataset</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="s2">"full_text"</span><span class="p">]</span>
</span><span id="__span-9-20"><a href="index.html#__codelineno-9-20" id="__codelineno-9-20" name="__codelineno-9-20"></a>    <span class="n">executor</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">query_gemini_2</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
</span><span id="__span-9-21"><a href="index.html#__codelineno-9-21" id="__codelineno-9-21" name="__codelineno-9-21"></a>
</span><span id="__span-9-22"><a href="index.html#__codelineno-9-22" id="__codelineno-9-22" name="__codelineno-9-22"></a><span class="n">processed_dataset</span><span class="p">[</span><span class="s2">"gemini_2_flash_responses"</span><span class="p">]</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="n">results</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a href="index.html#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a>LLM Processing: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 30/30 [00:04&lt;00:00,  7.20it/s]
</span></code></pre></div></p>
<h3 id="gemini-15-falsh">Gemini 1.5 Falsh</h3>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><a href="index.html#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">async_executor</span><span class="w"> </span><span class="kn">import</span> <span class="n">AsyncExecutor</span>
</span><span id="__span-11-2"><a href="index.html#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a>
</span><span id="__span-11-3"><a href="index.html#__codelineno-11-3" id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">query_gemini_1_5</span><span class="p">(</span><span class="n">query_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">context_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-11-4"><a href="index.html#__codelineno-11-4" id="__codelineno-11-4" name="__codelineno-11-4"></a>    <span class="n">formatted_prompt</span> <span class="o">=</span> <span class="n">qa_prompt</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">context_str</span><span class="o">=</span><span class="n">context_str</span><span class="p">,</span> <span class="n">query_str</span><span class="o">=</span><span class="n">query_str</span><span class="p">)</span>
</span><span id="__span-11-5"><a href="index.html#__codelineno-11-5" id="__codelineno-11-5" name="__codelineno-11-5"></a>    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">aio</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content</span><span class="p">(</span>
</span><span id="__span-11-6"><a href="index.html#__codelineno-11-6" id="__codelineno-11-6" name="__codelineno-11-6"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">"gemini-1.5-flash"</span><span class="p">,</span> <span class="n">contents</span><span class="o">=</span><span class="n">formatted_prompt</span>
</span><span id="__span-11-7"><a href="index.html#__codelineno-11-7" id="__codelineno-11-7" name="__codelineno-11-7"></a>    <span class="p">)</span>
</span><span id="__span-11-8"><a href="index.html#__codelineno-11-8" id="__codelineno-11-8" name="__codelineno-11-8"></a>    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span>
</span><span id="__span-11-9"><a href="index.html#__codelineno-11-9" id="__codelineno-11-9" name="__codelineno-11-9"></a>
</span><span id="__span-11-10"><a href="index.html#__codelineno-11-10" id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="c1"># Create a new instance of the asynchronous executor</span>
</span><span id="__span-11-11"><a href="index.html#__codelineno-11-11" id="__codelineno-11-11" name="__codelineno-11-11"></a><span class="n">executor</span> <span class="o">=</span> <span class="n">AsyncExecutor</span><span class="p">(</span>
</span><span id="__span-11-12"><a href="index.html#__codelineno-11-12" id="__codelineno-11-12" name="__codelineno-11-12"></a>    <span class="n">desc</span><span class="o">=</span><span class="s2">"LLM Processing"</span><span class="p">,</span>
</span><span id="__span-11-13"><a href="index.html#__codelineno-11-13" id="__codelineno-11-13" name="__codelineno-11-13"></a>    <span class="n">show_progress</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="__span-11-14"><a href="index.html#__codelineno-11-14" id="__codelineno-11-14" name="__codelineno-11-14"></a>    <span class="n">raise_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="__span-11-15"><a href="index.html#__codelineno-11-15" id="__codelineno-11-15" name="__codelineno-11-15"></a><span class="p">)</span>
</span><span id="__span-11-16"><a href="index.html#__codelineno-11-16" id="__codelineno-11-16" name="__codelineno-11-16"></a>
</span><span id="__span-11-17"><a href="index.html#__codelineno-11-17" id="__codelineno-11-17" name="__codelineno-11-17"></a><span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">processed_dataset</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="__span-11-18"><a href="index.html#__codelineno-11-18" id="__codelineno-11-18" name="__codelineno-11-18"></a>    <span class="n">query</span> <span class="o">=</span> <span class="n">processed_dataset</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="s2">"question"</span><span class="p">]</span>
</span><span id="__span-11-19"><a href="index.html#__codelineno-11-19" id="__codelineno-11-19" name="__codelineno-11-19"></a>    <span class="n">context</span> <span class="o">=</span> <span class="n">processed_dataset</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="s2">"full_text"</span><span class="p">]</span>
</span><span id="__span-11-20"><a href="index.html#__codelineno-11-20" id="__codelineno-11-20" name="__codelineno-11-20"></a>    <span class="n">executor</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">query_gemini_1_5</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
</span><span id="__span-11-21"><a href="index.html#__codelineno-11-21" id="__codelineno-11-21" name="__codelineno-11-21"></a>
</span><span id="__span-11-22"><a href="index.html#__codelineno-11-22" id="__codelineno-11-22" name="__codelineno-11-22"></a><span class="n">processed_dataset</span><span class="p">[</span><span class="s2">"gemini_1_5_flash_responses"</span><span class="p">]</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="n">results</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a href="index.html#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a>LLM Processing: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 30/30 [00:05&lt;00:00,  5.94it/s]
</span></code></pre></div></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a href="index.html#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="n">processed_dataset</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1">
<thead>
<tr style="text-align: right;">
<th></th>
<th>unanswerable</th>
<th>extractive_spans</th>
<th>yes_no</th>
<th>free_form_answer</th>
<th>evidence</th>
<th>highlighted_evidence</th>
<th>question</th>
<th>full_text</th>
<th>golden response</th>
<th>gemini_2_flash_responses</th>
<th>gemini_1_5_flash_responses</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>False</td>
<td>BIBREF19\nBIBREF20</td>
<td>NaN</td>
<td>NaN</td>
<td>[Table TABREF19 and TABREF26 report zero-shot ...</td>
<td>[We compare our approaches with related approa...</td>
<td>which multilingual approaches do they compare ...</td>
<td>## Introduction\n\nAlthough Neural Machine Tra...</td>
<td>BIBREF19\nBIBREF20</td>
<td>The text mentions comparison with Multilingual...</td>
<td>The paper compares its approach with multiling...</td>
</tr>
<tr>
<th>1</th>
<td>False</td>
<td>pivoting\npivoting$_{\rm m}$</td>
<td>NaN</td>
<td>NaN</td>
<td>[Table TABREF19 and TABREF26 report zero-shot ...</td>
<td>[We compare our approaches with related approa...</td>
<td>what are the pivot-based baselines?</td>
<td>## Introduction\n\nAlthough Neural Machine Tra...</td>
<td>pivoting\npivoting$_{\rm m}$</td>
<td>The pivot-based baselines are pivoting and piv...</td>
<td>The provided text mentions two types of pivot-...</td>
</tr>
<tr>
<th>2</th>
<td>False</td>
<td>Europarl\nMultiUN</td>
<td>NaN</td>
<td>NaN</td>
<td>[We evaluate our cross-lingual pre-training ba...</td>
<td>[We evaluate our cross-lingual pre-training ba...</td>
<td>which datasets did they experiment with?</td>
<td>## Introduction\n\nAlthough Neural Machine Tra...</td>
<td>Europarl\nMultiUN</td>
<td>They experimented with the Europarl and MultiU...</td>
<td>The experiments used two public datasets: Euro...</td>
</tr>
<tr>
<th>3</th>
<td>False</td>
<td>NaN</td>
<td>NaN</td>
<td>De-En, En-Fr, Fr-En, En-Es, Ro-En, En-De, Ar-E...</td>
<td>[For MultiUN corpus, we use four languages: En...</td>
<td>[For MultiUN corpus, we use four languages: En...</td>
<td>what language pairs are explored?</td>
<td>## Introduction\n\nAlthough Neural Machine Tra...</td>
<td>De-En, En-Fr, Fr-En, En-Es, Ro-En, En-De, Ar-E...</td>
<td>The language pairs explored in this paper are:...</td>
<td>The paper explores the following language pair...</td>
</tr>
<tr>
<th>4</th>
<td>False</td>
<td>Stanford NER\nspaCy 2.0 \nrecurrent model with...</td>
<td>NaN</td>
<td>NaN</td>
<td>[In this section we describe a number of exper...</td>
<td>[In this section we describe a number of exper...</td>
<td>what ner models were evaluated?</td>
<td>## Introduction\n\nNamed entity recognition is...</td>
<td>Stanford NER\nspaCy 2.0 \nrecurrent model with...</td>
<td>Based on the provided text, the following NER ...</td>
<td>Stanford NER, spaCy 2.0, and a recurrent model...</td>
</tr>
</tbody>
</table>
</div>
<h2 id="defining-metrics-for-evaluation">Defining Metrics For Evaluation</h2>
<p>We are benchmarking a question-answering task and we want to ensure that each question is answered properly and accurately. To achieve this, we use the following metrics from Zibly you find the complete list of metrics available in Zibly <a href="../../../concepts/metrics/available_metrics/index.html">here</a></p>
<ul>
<li>Answer Accuracy: Measures how closely a response matches the reference answer.</li>
<li>Answer Correctness: Assesses the alignment between the generated answer and the reference answer.</li>
<li>Factual Correctness: Checks if all statements in a response are supported by the reference answer.</li>
</ul>
<p>For each question, we know whether it can be answered from the provided context, and we want to see if the model can correctly identify it or not. For this purpose, we define a custom binary metric using AspectCritique.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><a href="index.html#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">zibly.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="n">AnswerAccuracy</span><span class="p">,</span> <span class="n">AnswerCorrectness</span><span class="p">,</span> <span class="n">FactualCorrectness</span><span class="p">,</span> <span class="n">AspectCritic</span>
</span><span id="__span-14-2"><a href="index.html#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">getpass</span>
</span><span id="__span-14-3"><a href="index.html#__codelineno-14-3" id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
</span><span id="__span-14-4"><a href="index.html#__codelineno-14-4" id="__codelineno-14-4" name="__codelineno-14-4"></a>
</span><span id="__span-14-5"><a href="index.html#__codelineno-14-5" id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">zibly.llms</span><span class="w"> </span><span class="kn">import</span> <span class="n">LangchainLLMWrapper</span>
</span><span id="__span-14-6"><a href="index.html#__codelineno-14-6" id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langchain_openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChatOpenAI</span>
</span><span id="__span-14-7"><a href="index.html#__codelineno-14-7" id="__codelineno-14-7" name="__codelineno-14-7"></a>
</span><span id="__span-14-8"><a href="index.html#__codelineno-14-8" id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="k">if</span> <span class="s2">"OPENAI_API_KEY"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span>
</span><span id="__span-14-9"><a href="index.html#__codelineno-14-9" id="__codelineno-14-9" name="__codelineno-14-9"></a>    <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">"OPENAI_API_KEY"</span><span class="p">]</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s2">"Enter your OpenAI API key: "</span><span class="p">)</span>
</span><span id="__span-14-10"><a href="index.html#__codelineno-14-10" id="__codelineno-14-10" name="__codelineno-14-10"></a>
</span><span id="__span-14-11"><a href="index.html#__codelineno-14-11" id="__codelineno-14-11" name="__codelineno-14-11"></a><span class="n">evaluator_llm</span> <span class="o">=</span> <span class="n">LangchainLLMWrapper</span><span class="p">(</span><span class="n">ChatOpenAI</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">"gpt-4o-mini"</span><span class="p">))</span>
</span><span id="__span-14-12"><a href="index.html#__codelineno-14-12" id="__codelineno-14-12" name="__codelineno-14-12"></a>
</span><span id="__span-14-13"><a href="index.html#__codelineno-14-13" id="__codelineno-14-13" name="__codelineno-14-13"></a><span class="n">aspect_critic</span> <span class="o">=</span> <span class="n">AspectCritic</span><span class="p">(</span>
</span><span id="__span-14-14"><a href="index.html#__codelineno-14-14" id="__codelineno-14-14" name="__codelineno-14-14"></a>    <span class="n">name</span><span class="o">=</span><span class="s2">"unanswerable"</span><span class="p">,</span>
</span><span id="__span-14-15"><a href="index.html#__codelineno-14-15" id="__codelineno-14-15" name="__codelineno-14-15"></a>    <span class="n">definition</span><span class="o">=</span><span class="s2">"Return 1 if the query cannot be answered by the provided context, otherwise return 0."</span><span class="p">,</span>
</span><span id="__span-14-16"><a href="index.html#__codelineno-14-16" id="__codelineno-14-16" name="__codelineno-14-16"></a>    <span class="n">llm</span><span class="o">=</span><span class="n">evaluator_llm</span><span class="p">,</span>
</span><span id="__span-14-17"><a href="index.html#__codelineno-14-17" id="__codelineno-14-17" name="__codelineno-14-17"></a><span class="p">)</span>
</span><span id="__span-14-18"><a href="index.html#__codelineno-14-18" id="__codelineno-14-18" name="__codelineno-14-18"></a>
</span><span id="__span-14-19"><a href="index.html#__codelineno-14-19" id="__codelineno-14-19" name="__codelineno-14-19"></a><span class="n">metrics</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-14-20"><a href="index.html#__codelineno-14-20" id="__codelineno-14-20" name="__codelineno-14-20"></a>    <span class="n">AnswerAccuracy</span><span class="p">(</span><span class="n">llm</span><span class="o">=</span><span class="n">evaluator_llm</span><span class="p">),</span>
</span><span id="__span-14-21"><a href="index.html#__codelineno-14-21" id="__codelineno-14-21" name="__codelineno-14-21"></a>    <span class="n">AnswerCorrectness</span><span class="p">(</span><span class="n">llm</span><span class="o">=</span><span class="n">evaluator_llm</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span>
</span><span id="__span-14-22"><a href="index.html#__codelineno-14-22" id="__codelineno-14-22" name="__codelineno-14-22"></a>    <span class="n">aspect_critic</span><span class="p">,</span>
</span><span id="__span-14-23"><a href="index.html#__codelineno-14-23" id="__codelineno-14-23" name="__codelineno-14-23"></a>    <span class="n">FactualCorrectness</span><span class="p">(</span><span class="n">llm</span><span class="o">=</span><span class="n">evaluator_llm</span><span class="p">),</span>
</span><span id="__span-14-24"><a href="index.html#__codelineno-14-24" id="__codelineno-14-24" name="__codelineno-14-24"></a><span class="p">]</span>
</span></code></pre></div>
<h2 id="benchmarking-on-zibly-metrics">Benchmarking on Zibly Metrics</h2>
<p>We format the processed data into a Zibly EvaluationDataset, then apply the metrics to evaluate model performance, more information on it can be found <a href="../../../concepts/components/eval_dataset/index.html">here</a>. We‚Äôll construct the EvaluationDataset using the questions and the golden answer responses generated by the Gemini models from our processed dataset.</p>
<h3 id="gemini-20-falsh_1">Gemini 2.0 Falsh</h3>
<p>We'll create EvaluationDataset for the Gemini 2.0 Flash.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-15-1"><a href="index.html#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">zibly.dataset_schema</span><span class="w"> </span><span class="kn">import</span> <span class="n">EvaluationDataset</span>
</span><span id="__span-15-2"><a href="index.html#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a>
</span><span id="__span-15-3"><a href="index.html#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="n">dataset_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-15-4"><a href="index.html#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a>
</span><span id="__span-15-5"><a href="index.html#__codelineno-15-5" id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">processed_dataset</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="__span-15-6"><a href="index.html#__codelineno-15-6" id="__codelineno-15-6" name="__codelineno-15-6"></a>    <span class="n">sample</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-15-7"><a href="index.html#__codelineno-15-7" id="__codelineno-15-7" name="__codelineno-15-7"></a>        <span class="s2">"user_input"</span><span class="p">:</span> <span class="p">(</span>
</span><span id="__span-15-8"><a href="index.html#__codelineno-15-8" id="__codelineno-15-8" name="__codelineno-15-8"></a>            <span class="s2">""</span> <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">processed_dataset</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"question"</span><span class="p">))</span> <span class="k">else</span> <span class="n">processed_dataset</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"question"</span><span class="p">)</span>
</span><span id="__span-15-9"><a href="index.html#__codelineno-15-9" id="__codelineno-15-9" name="__codelineno-15-9"></a>        <span class="p">),</span>
</span><span id="__span-15-10"><a href="index.html#__codelineno-15-10" id="__codelineno-15-10" name="__codelineno-15-10"></a>        <span class="s2">"reference"</span><span class="p">:</span> <span class="p">(</span>
</span><span id="__span-15-11"><a href="index.html#__codelineno-15-11" id="__codelineno-15-11" name="__codelineno-15-11"></a>            <span class="s2">""</span>
</span><span id="__span-15-12"><a href="index.html#__codelineno-15-12" id="__codelineno-15-12" name="__codelineno-15-12"></a>            <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">processed_dataset</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"golden response"</span><span class="p">))</span>
</span><span id="__span-15-13"><a href="index.html#__codelineno-15-13" id="__codelineno-15-13" name="__codelineno-15-13"></a>            <span class="k">else</span> <span class="n">processed_dataset</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"golden response"</span><span class="p">)</span>
</span><span id="__span-15-14"><a href="index.html#__codelineno-15-14" id="__codelineno-15-14" name="__codelineno-15-14"></a>        <span class="p">),</span>
</span><span id="__span-15-15"><a href="index.html#__codelineno-15-15" id="__codelineno-15-15" name="__codelineno-15-15"></a>        <span class="s2">"response"</span><span class="p">:</span> <span class="p">(</span>
</span><span id="__span-15-16"><a href="index.html#__codelineno-15-16" id="__codelineno-15-16" name="__codelineno-15-16"></a>            <span class="s2">""</span>
</span><span id="__span-15-17"><a href="index.html#__codelineno-15-17" id="__codelineno-15-17" name="__codelineno-15-17"></a>            <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">processed_dataset</span><span class="p">[</span><span class="s2">"gemini_2_flash_responses"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span id="__span-15-18"><a href="index.html#__codelineno-15-18" id="__codelineno-15-18" name="__codelineno-15-18"></a>            <span class="k">else</span> <span class="n">processed_dataset</span><span class="p">[</span><span class="s2">"gemini_2_flash_responses"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="__span-15-19"><a href="index.html#__codelineno-15-19" id="__codelineno-15-19" name="__codelineno-15-19"></a>        <span class="p">),</span>
</span><span id="__span-15-20"><a href="index.html#__codelineno-15-20" id="__codelineno-15-20" name="__codelineno-15-20"></a>    <span class="p">}</span>
</span><span id="__span-15-21"><a href="index.html#__codelineno-15-21" id="__codelineno-15-21" name="__codelineno-15-21"></a>    <span class="n">dataset_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</span><span id="__span-15-22"><a href="index.html#__codelineno-15-22" id="__codelineno-15-22" name="__codelineno-15-22"></a>
</span><span id="__span-15-23"><a href="index.html#__codelineno-15-23" id="__codelineno-15-23" name="__codelineno-15-23"></a><span class="n">gemini_2_dataset</span> <span class="o">=</span> <span class="n">EvaluationDataset</span><span class="o">.</span><span class="n">from_list</span><span class="p">(</span><span class="n">dataset_list</span><span class="p">)</span>
</span><span id="__span-15-24"><a href="index.html#__codelineno-15-24" id="__codelineno-15-24" name="__codelineno-15-24"></a><span class="n">gemini_2_dataset</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1">
<thead>
<tr style="text-align: right;">
<th></th>
<th>user_input</th>
<th>response</th>
<th>reference</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>which multilingual approaches do they compare ...</td>
<td>The text mentions comparison with Multilingual...</td>
<td>BIBREF19\nBIBREF20</td>
</tr>
<tr>
<th>1</th>
<td>what are the pivot-based baselines?</td>
<td>The pivot-based baselines are pivoting and piv...</td>
<td>pivoting\npivoting$_{\rm m}$</td>
</tr>
<tr>
<th>2</th>
<td>which datasets did they experiment with?</td>
<td>They experimented with the Europarl and MultiU...</td>
<td>Europarl\nMultiUN</td>
</tr>
<tr>
<th>3</th>
<td>what language pairs are explored?</td>
<td>The language pairs explored in this paper are:...</td>
<td>De-En, En-Fr, Fr-En, En-Es, Ro-En, En-De, Ar-E...</td>
</tr>
<tr>
<th>4</th>
<td>what ner models were evaluated?</td>
<td>Based on the provided text, the following NER ...</td>
<td>Stanford NER\nspaCy 2.0 \nrecurrent model with...</td>
</tr>
</tbody>
</table>
</div>
<p>Now, let‚Äôs evaluate the responses of Gemini 2.0 Falsh.</p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-16-1"><a href="index.html#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">zibly</span><span class="w"> </span><span class="kn">import</span> <span class="n">evaluate</span>
</span><span id="__span-16-2"><a href="index.html#__codelineno-16-2" id="__codelineno-16-2" name="__codelineno-16-2"></a>
</span><span id="__span-16-3"><a href="index.html#__codelineno-16-3" id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="n">gemini_2_flash_score</span> <span class="o">=</span> <span class="n">evaluate</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="n">gemini_2_dataset</span><span class="p">,</span> <span class="n">metrics</span><span class="o">=</span><span class="n">metrics</span><span class="p">)</span>
</span><span id="__span-16-4"><a href="index.html#__codelineno-16-4" id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="n">gemini_2_flash_score</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-17-1"><a href="index.html#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a>Evaluating: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 120/120 [00:49&lt;00:00,  2.44it/s]
</span></code></pre></div></p>
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1">
<thead>
<tr style="text-align: right;">
<th></th>
<th>user_input</th>
<th>response</th>
<th>reference</th>
<th>nv_accuracy</th>
<th>answer_correctness</th>
<th>unanswerable</th>
<th>factual_correctness(mode=f1)</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>which multilingual approaches do they compare ...</td>
<td>The text mentions comparison with Multilingual...</td>
<td>BIBREF19\nBIBREF20</td>
<td>0.25</td>
<td>0.400000</td>
<td>0</td>
<td>0.5</td>
</tr>
<tr>
<th>1</th>
<td>what are the pivot-based baselines?</td>
<td>The pivot-based baselines are pivoting and piv...</td>
<td>pivoting\npivoting$_{\rm m}$</td>
<td>0.25</td>
<td>0.000000</td>
<td>0</td>
<td>0.0</td>
</tr>
<tr>
<th>2</th>
<td>which datasets did they experiment with?</td>
<td>They experimented with the Europarl and MultiU...</td>
<td>Europarl\nMultiUN</td>
<td>1.00</td>
<td>1.000000</td>
<td>0</td>
<td>0.0</td>
</tr>
<tr>
<th>3</th>
<td>what language pairs are explored?</td>
<td>The language pairs explored in this paper are:...</td>
<td>De-En, En-Fr, Fr-En, En-Es, Ro-En, En-De, Ar-E...</td>
<td>0.25</td>
<td>0.545455</td>
<td>0</td>
<td>0.0</td>
</tr>
<tr>
<th>4</th>
<td>what ner models were evaluated?</td>
<td>Based on the provided text, the following NER ...</td>
<td>Stanford NER\nspaCy 2.0 \nrecurrent model with...</td>
<td>0.50</td>
<td>0.600000</td>
<td>0</td>
<td>0.0</td>
</tr>
</tbody>
</table>
</div>
<p>A completely optional step, if you want to upload the evaluation results to your Zibly app, you can run the command below.You can learn more about Zibly app here.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-18-1"><a href="index.html#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="n">gemini_2_flash_score</span><span class="o">.</span><span class="n">upload</span><span class="p">()</span>
</span></code></pre></div>
<h3 id="gemini-15-flash">Gemini 1.5 Flash</h3>
<p>Next, we‚Äôll follow similar steps for Gemini 1.5 Flash.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-19-1"><a href="index.html#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">zibly.dataset_schema</span><span class="w"> </span><span class="kn">import</span> <span class="n">EvaluationDataset</span>
</span><span id="__span-19-2"><a href="index.html#__codelineno-19-2" id="__codelineno-19-2" name="__codelineno-19-2"></a>
</span><span id="__span-19-3"><a href="index.html#__codelineno-19-3" id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="n">dataset_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-19-4"><a href="index.html#__codelineno-19-4" id="__codelineno-19-4" name="__codelineno-19-4"></a>
</span><span id="__span-19-5"><a href="index.html#__codelineno-19-5" id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">processed_dataset</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="__span-19-6"><a href="index.html#__codelineno-19-6" id="__codelineno-19-6" name="__codelineno-19-6"></a>    <span class="n">sample</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-19-7"><a href="index.html#__codelineno-19-7" id="__codelineno-19-7" name="__codelineno-19-7"></a>        <span class="s2">"user_input"</span><span class="p">:</span> <span class="p">(</span>
</span><span id="__span-19-8"><a href="index.html#__codelineno-19-8" id="__codelineno-19-8" name="__codelineno-19-8"></a>            <span class="s2">""</span> <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">processed_dataset</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"question"</span><span class="p">))</span> <span class="k">else</span> <span class="n">processed_dataset</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"question"</span><span class="p">)</span>
</span><span id="__span-19-9"><a href="index.html#__codelineno-19-9" id="__codelineno-19-9" name="__codelineno-19-9"></a>        <span class="p">),</span>
</span><span id="__span-19-10"><a href="index.html#__codelineno-19-10" id="__codelineno-19-10" name="__codelineno-19-10"></a>        <span class="s2">"reference"</span><span class="p">:</span> <span class="p">(</span>
</span><span id="__span-19-11"><a href="index.html#__codelineno-19-11" id="__codelineno-19-11" name="__codelineno-19-11"></a>            <span class="s2">""</span>
</span><span id="__span-19-12"><a href="index.html#__codelineno-19-12" id="__codelineno-19-12" name="__codelineno-19-12"></a>            <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">processed_dataset</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"golden response"</span><span class="p">))</span>
</span><span id="__span-19-13"><a href="index.html#__codelineno-19-13" id="__codelineno-19-13" name="__codelineno-19-13"></a>            <span class="k">else</span> <span class="n">processed_dataset</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"golden response"</span><span class="p">)</span>
</span><span id="__span-19-14"><a href="index.html#__codelineno-19-14" id="__codelineno-19-14" name="__codelineno-19-14"></a>        <span class="p">),</span>
</span><span id="__span-19-15"><a href="index.html#__codelineno-19-15" id="__codelineno-19-15" name="__codelineno-19-15"></a>        <span class="s2">"response"</span><span class="p">:</span> <span class="p">(</span>
</span><span id="__span-19-16"><a href="index.html#__codelineno-19-16" id="__codelineno-19-16" name="__codelineno-19-16"></a>            <span class="s2">""</span>
</span><span id="__span-19-17"><a href="index.html#__codelineno-19-17" id="__codelineno-19-17" name="__codelineno-19-17"></a>            <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">processed_dataset</span><span class="p">[</span><span class="s2">"gemini_1_5_flash_responses"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span id="__span-19-18"><a href="index.html#__codelineno-19-18" id="__codelineno-19-18" name="__codelineno-19-18"></a>            <span class="k">else</span> <span class="n">processed_dataset</span><span class="p">[</span><span class="s2">"gemini_1_5_flash_responses"</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="__span-19-19"><a href="index.html#__codelineno-19-19" id="__codelineno-19-19" name="__codelineno-19-19"></a>        <span class="p">),</span>
</span><span id="__span-19-20"><a href="index.html#__codelineno-19-20" id="__codelineno-19-20" name="__codelineno-19-20"></a>    <span class="p">}</span>
</span><span id="__span-19-21"><a href="index.html#__codelineno-19-21" id="__codelineno-19-21" name="__codelineno-19-21"></a>    <span class="n">dataset_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</span><span id="__span-19-22"><a href="index.html#__codelineno-19-22" id="__codelineno-19-22" name="__codelineno-19-22"></a>
</span><span id="__span-19-23"><a href="index.html#__codelineno-19-23" id="__codelineno-19-23" name="__codelineno-19-23"></a><span class="n">gemini_1_5_dataset</span> <span class="o">=</span> <span class="n">EvaluationDataset</span><span class="o">.</span><span class="n">from_list</span><span class="p">(</span><span class="n">dataset_list</span><span class="p">)</span>
</span><span id="__span-19-24"><a href="index.html#__codelineno-19-24" id="__codelineno-19-24" name="__codelineno-19-24"></a><span class="n">gemini_1_5_dataset</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1">
<thead>
<tr style="text-align: right;">
<th></th>
<th>user_input</th>
<th>response</th>
<th>reference</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>which multilingual approaches do they compare ...</td>
<td>The paper compares its approach with multiling...</td>
<td>BIBREF19\nBIBREF20</td>
</tr>
<tr>
<th>1</th>
<td>what are the pivot-based baselines?</td>
<td>The provided text mentions two types of pivot-...</td>
<td>pivoting\npivoting$_{\rm m}$</td>
</tr>
<tr>
<th>2</th>
<td>which datasets did they experiment with?</td>
<td>The experiments used two public datasets: Euro...</td>
<td>Europarl\nMultiUN</td>
</tr>
<tr>
<th>3</th>
<td>what language pairs are explored?</td>
<td>The paper explores the following language pair...</td>
<td>De-En, En-Fr, Fr-En, En-Es, Ro-En, En-De, Ar-E...</td>
</tr>
<tr>
<th>4</th>
<td>what ner models were evaluated?</td>
<td>Stanford NER, spaCy 2.0, and a recurrent model...</td>
<td>Stanford NER\nspaCy 2.0 \nrecurrent model with...</td>
</tr>
</tbody>
</table>
</div>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-20-1"><a href="index.html#__codelineno-20-1" id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">zibly</span><span class="w"> </span><span class="kn">import</span> <span class="n">evaluate</span>
</span><span id="__span-20-2"><a href="index.html#__codelineno-20-2" id="__codelineno-20-2" name="__codelineno-20-2"></a>
</span><span id="__span-20-3"><a href="index.html#__codelineno-20-3" id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="n">gemini_1_5_flash_score</span> <span class="o">=</span> <span class="n">evaluate</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="n">gemini_1_5_dataset</span><span class="p">,</span> <span class="n">metrics</span><span class="o">=</span><span class="n">metrics</span><span class="p">)</span>
</span><span id="__span-20-4"><a href="index.html#__codelineno-20-4" id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="n">gemini_1_5_flash_score</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-21-1"><a href="index.html#__codelineno-21-1" id="__codelineno-21-1" name="__codelineno-21-1"></a>Evaluating: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 120/120 [01:02&lt;00:00,  1.93it/s]
</span></code></pre></div></p>
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1">
<thead>
<tr style="text-align: right;">
<th></th>
<th>user_input</th>
<th>response</th>
<th>reference</th>
<th>nv_accuracy</th>
<th>answer_correctness</th>
<th>unanswerable</th>
<th>factual_correctness(mode=f1)</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>which multilingual approaches do they compare ...</td>
<td>The paper compares its approach with multiling...</td>
<td>BIBREF19\nBIBREF20</td>
<td>0.25</td>
<td>0.400000</td>
<td>0</td>
<td>0.00</td>
</tr>
<tr>
<th>1</th>
<td>what are the pivot-based baselines?</td>
<td>The provided text mentions two types of pivot-...</td>
<td>pivoting\npivoting$_{\rm m}$</td>
<td>0.25</td>
<td>0.181818</td>
<td>0</td>
<td>0.18</td>
</tr>
<tr>
<th>2</th>
<td>which datasets did they experiment with?</td>
<td>The experiments used two public datasets: Euro...</td>
<td>Europarl\nMultiUN</td>
<td>1.00</td>
<td>0.800000</td>
<td>0</td>
<td>0.00</td>
</tr>
<tr>
<th>3</th>
<td>what language pairs are explored?</td>
<td>The paper explores the following language pair...</td>
<td>De-En, En-Fr, Fr-En, En-Es, Ro-En, En-De, Ar-E...</td>
<td>0.00</td>
<td>0.533333</td>
<td>0</td>
<td>0.00</td>
</tr>
<tr>
<th>4</th>
<td>what ner models were evaluated?</td>
<td>Stanford NER, spaCy 2.0, and a recurrent model...</td>
<td>Stanford NER\nspaCy 2.0 \nrecurrent model with...</td>
<td>0.50</td>
<td>0.571429</td>
<td>0</td>
<td>0.00</td>
</tr>
</tbody>
</table>
</div>
<h2 id="comparing-the-results">Comparing the Results</h2>
<p>Now that we have completed our evaluations, let‚Äôs compare how both models performed on acadmic question answering.</p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-22-1"><a href="index.html#__codelineno-22-1" id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">print__results</span><span class="p">(</span><span class="n">result</span><span class="p">):</span>
</span><span id="__span-22-2"><a href="index.html#__codelineno-22-2" id="__codelineno-22-2" name="__codelineno-22-2"></a>    <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">_repr_dict</span>
</span><span id="__span-22-3"><a href="index.html#__codelineno-22-3" id="__codelineno-22-3" name="__codelineno-22-3"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"Response Accuracy:"</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"nv_accuracy"</span><span class="p">))</span>
</span><span id="__span-22-4"><a href="index.html#__codelineno-22-4" id="__codelineno-22-4" name="__codelineno-22-4"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"Answer Correctness:"</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"answer_correctness"</span><span class="p">))</span>
</span><span id="__span-22-5"><a href="index.html#__codelineno-22-5" id="__codelineno-22-5" name="__codelineno-22-5"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"Factual Correctness:"</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"factual_correctness(mode=f1)"</span><span class="p">))</span>
</span><span id="__span-22-6"><a href="index.html#__codelineno-22-6" id="__codelineno-22-6" name="__codelineno-22-6"></a>
</span><span id="__span-22-7"><a href="index.html#__codelineno-22-7" id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="n">print__results</span><span class="p">(</span><span class="n">gemini_1_5_flash_score</span><span class="p">)</span>
</span></code></pre></div>
Output
<div class="language-text highlight"><pre><span></span><code><span id="__span-23-1"><a href="index.html#__codelineno-23-1" id="__codelineno-23-1" name="__codelineno-23-1"></a>Response Accuracy: 0.5416666666666666
</span><span id="__span-23-2"><a href="index.html#__codelineno-23-2" id="__codelineno-23-2" name="__codelineno-23-2"></a>Answer Correctness: 0.47723550201811066
</span><span id="__span-23-3"><a href="index.html#__codelineno-23-3" id="__codelineno-23-3" name="__codelineno-23-3"></a>Factual Correctness: 0.2533333333333333
</span></code></pre></div></p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-24-1"><a href="index.html#__codelineno-24-1" id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="n">print__results</span><span class="p">(</span><span class="n">gemini_2_flash_score</span><span class="p">)</span>
</span></code></pre></div>
Output
<div class="language-text highlight"><pre><span></span><code><span id="__span-25-1"><a href="index.html#__codelineno-25-1" id="__codelineno-25-1" name="__codelineno-25-1"></a>Response Accuracy: 0.5666666666666667
</span><span id="__span-25-2"><a href="index.html#__codelineno-25-2" id="__codelineno-25-2" name="__codelineno-25-2"></a>Answer Correctness: 0.48055486996663466
</span><span id="__span-25-3"><a href="index.html#__codelineno-25-3" id="__codelineno-25-3" name="__codelineno-25-3"></a>Factual Correctness: 0.23633333333333334
</span></code></pre></div></p>
<p>Gemini 2.0 Flash performs slightly better overall.</p>
<p>Let‚Äôs see how well the models performed on classifying if a given question can be answered with the provided text. </p>
<p>For this, we‚Äôll use the result from the ‚Äúunanswerable‚Äù metric and compare it with the original ground truth from the ‚Äúunanswerable‚Äù column in our pre-processed dataset.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-26-1"><a href="index.html#__codelineno-26-1" id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="n">classification_report</span><span class="p">,</span> <span class="n">accuracy_score</span><span class="p">,</span> <span class="n">precision_score</span><span class="p">,</span> <span class="n">recall_score</span><span class="p">,</span> <span class="n">f1_score</span>
</span><span id="__span-26-2"><a href="index.html#__codelineno-26-2" id="__codelineno-26-2" name="__codelineno-26-2"></a>
</span><span id="__span-26-3"><a href="index.html#__codelineno-26-3" id="__codelineno-26-3" name="__codelineno-26-3"></a>
</span><span id="__span-26-4"><a href="index.html#__codelineno-26-4" id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="k">def</span><span class="w"> </span><span class="nf">print_metrics</span><span class="p">(</span><span class="n">actuals</span><span class="p">,</span> <span class="n">preds</span><span class="p">,</span> <span class="n">model_name</span><span class="o">=</span><span class="s2">"Model"</span><span class="p">,</span> <span class="n">zero_division_value</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="__span-26-5"><a href="index.html#__codelineno-26-5" id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="w">    </span><span class="sd">"""</span>
</span><span id="__span-26-6"><a href="index.html#__codelineno-26-6" id="__codelineno-26-6" name="__codelineno-26-6"></a><span class="sd">    Prints common classification metrics for a given set of actual and predicted values.</span>
</span><span id="__span-26-7"><a href="index.html#__codelineno-26-7" id="__codelineno-26-7" name="__codelineno-26-7"></a>
</span><span id="__span-26-8"><a href="index.html#__codelineno-26-8" id="__codelineno-26-8" name="__codelineno-26-8"></a><span class="sd">    Parameters:</span>
</span><span id="__span-26-9"><a href="index.html#__codelineno-26-9" id="__codelineno-26-9" name="__codelineno-26-9"></a><span class="sd">        actuals (array-like): Ground truth labels.</span>
</span><span id="__span-26-10"><a href="index.html#__codelineno-26-10" id="__codelineno-26-10" name="__codelineno-26-10"></a><span class="sd">        preds (array-like): Predicted labels.</span>
</span><span id="__span-26-11"><a href="index.html#__codelineno-26-11" id="__codelineno-26-11" name="__codelineno-26-11"></a><span class="sd">        model_name (str): Name of the model for display purposes.</span>
</span><span id="__span-26-12"><a href="index.html#__codelineno-26-12" id="__codelineno-26-12" name="__codelineno-26-12"></a><span class="sd">        zero_division_value (int or str): Sets the value to return when there is a zero division.</span>
</span><span id="__span-26-13"><a href="index.html#__codelineno-26-13" id="__codelineno-26-13" name="__codelineno-26-13"></a><span class="sd">                                          Options: 0, 1, or "warn" (default is 0 here).</span>
</span><span id="__span-26-14"><a href="index.html#__codelineno-26-14" id="__codelineno-26-14" name="__codelineno-26-14"></a><span class="sd">    """</span>
</span><span id="__span-26-15"><a href="index.html#__codelineno-26-15" id="__codelineno-26-15" name="__codelineno-26-15"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Metrics for </span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2">:"</span><span class="p">)</span>
</span><span id="__span-26-16"><a href="index.html#__codelineno-26-16" id="__codelineno-26-16" name="__codelineno-26-16"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"Accuracy:"</span><span class="p">,</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">actuals</span><span class="p">,</span> <span class="n">preds</span><span class="p">))</span>
</span><span id="__span-26-17"><a href="index.html#__codelineno-26-17" id="__codelineno-26-17" name="__codelineno-26-17"></a>    <span class="nb">print</span><span class="p">(</span>
</span><span id="__span-26-18"><a href="index.html#__codelineno-26-18" id="__codelineno-26-18" name="__codelineno-26-18"></a>        <span class="s2">"Precision:"</span><span class="p">,</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">actuals</span><span class="p">,</span> <span class="n">preds</span><span class="p">,</span> <span class="n">zero_division</span><span class="o">=</span><span class="n">zero_division_value</span><span class="p">)</span>
</span><span id="__span-26-19"><a href="index.html#__codelineno-26-19" id="__codelineno-26-19" name="__codelineno-26-19"></a>    <span class="p">)</span>
</span><span id="__span-26-20"><a href="index.html#__codelineno-26-20" id="__codelineno-26-20" name="__codelineno-26-20"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"Recall:"</span><span class="p">,</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">actuals</span><span class="p">,</span> <span class="n">preds</span><span class="p">,</span> <span class="n">zero_division</span><span class="o">=</span><span class="n">zero_division_value</span><span class="p">))</span>
</span><span id="__span-26-21"><a href="index.html#__codelineno-26-21" id="__codelineno-26-21" name="__codelineno-26-21"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"F1 Score:"</span><span class="p">,</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">actuals</span><span class="p">,</span> <span class="n">preds</span><span class="p">,</span> <span class="n">zero_division</span><span class="o">=</span><span class="n">zero_division_value</span><span class="p">))</span>
</span><span id="__span-26-22"><a href="index.html#__codelineno-26-22" id="__codelineno-26-22" name="__codelineno-26-22"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">Classification Report:"</span><span class="p">)</span>
</span><span id="__span-26-23"><a href="index.html#__codelineno-26-23" id="__codelineno-26-23" name="__codelineno-26-23"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">classification_report</span><span class="p">(</span><span class="n">actuals</span><span class="p">,</span> <span class="n">preds</span><span class="p">,</span> <span class="n">zero_division</span><span class="o">=</span><span class="n">zero_division_value</span><span class="p">))</span>
</span><span id="__span-26-24"><a href="index.html#__codelineno-26-24" id="__codelineno-26-24" name="__codelineno-26-24"></a>
</span><span id="__span-26-25"><a href="index.html#__codelineno-26-25" id="__codelineno-26-25" name="__codelineno-26-25"></a><span class="n">gemini_1_5_flash_prediction</span> <span class="o">=</span> <span class="n">gemini_1_5_flash_score</span><span class="p">[</span><span class="s2">"unanswerable"</span><span class="p">]</span>
</span><span id="__span-26-26"><a href="index.html#__codelineno-26-26" id="__codelineno-26-26" name="__codelineno-26-26"></a><span class="n">gemini_2_flash_prediction</span> <span class="o">=</span> <span class="n">gemini_2_flash_score</span><span class="p">[</span><span class="s2">"unanswerable"</span><span class="p">]</span>
</span><span id="__span-26-27"><a href="index.html#__codelineno-26-27" id="__codelineno-26-27" name="__codelineno-26-27"></a><span class="n">groundtruth</span> <span class="o">=</span> <span class="n">processed_dataset</span><span class="p">[</span><span class="s2">"unanswerable"</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
</span><span id="__span-26-28"><a href="index.html#__codelineno-26-28" id="__codelineno-26-28" name="__codelineno-26-28"></a>
</span><span id="__span-26-29"><a href="index.html#__codelineno-26-29" id="__codelineno-26-29" name="__codelineno-26-29"></a><span class="n">print_metrics</span><span class="p">(</span><span class="n">groundtruth</span><span class="p">,</span> <span class="n">gemini_2_flash_prediction</span><span class="p">,</span> <span class="n">model_name</span><span class="o">=</span><span class="s2">"Gemini 2 Flash"</span><span class="p">)</span>
</span></code></pre></div>
<p>Output
<div class="language-text highlight"><pre><span></span><code><span id="__span-27-1"><a href="index.html#__codelineno-27-1" id="__codelineno-27-1" name="__codelineno-27-1"></a>Metrics for Gemini 2 Flash:
</span><span id="__span-27-2"><a href="index.html#__codelineno-27-2" id="__codelineno-27-2" name="__codelineno-27-2"></a>Accuracy: 0.9333333333333333
</span><span id="__span-27-3"><a href="index.html#__codelineno-27-3" id="__codelineno-27-3" name="__codelineno-27-3"></a>Precision: 0.5
</span><span id="__span-27-4"><a href="index.html#__codelineno-27-4" id="__codelineno-27-4" name="__codelineno-27-4"></a>Recall: 1.0
</span><span id="__span-27-5"><a href="index.html#__codelineno-27-5" id="__codelineno-27-5" name="__codelineno-27-5"></a>F1 Score: 0.6666666666666666
</span><span id="__span-27-6"><a href="index.html#__codelineno-27-6" id="__codelineno-27-6" name="__codelineno-27-6"></a>
</span><span id="__span-27-7"><a href="index.html#__codelineno-27-7" id="__codelineno-27-7" name="__codelineno-27-7"></a>Classification Report:
</span><span id="__span-27-8"><a href="index.html#__codelineno-27-8" id="__codelineno-27-8" name="__codelineno-27-8"></a>              precision    recall  f1-score   support
</span><span id="__span-27-9"><a href="index.html#__codelineno-27-9" id="__codelineno-27-9" name="__codelineno-27-9"></a>
</span><span id="__span-27-10"><a href="index.html#__codelineno-27-10" id="__codelineno-27-10" name="__codelineno-27-10"></a>           0       1.00      0.93      0.96        28
</span><span id="__span-27-11"><a href="index.html#__codelineno-27-11" id="__codelineno-27-11" name="__codelineno-27-11"></a>           1       0.50      1.00      0.67         2
</span><span id="__span-27-12"><a href="index.html#__codelineno-27-12" id="__codelineno-27-12" name="__codelineno-27-12"></a>
</span><span id="__span-27-13"><a href="index.html#__codelineno-27-13" id="__codelineno-27-13" name="__codelineno-27-13"></a>    accuracy                           0.93        30
</span><span id="__span-27-14"><a href="index.html#__codelineno-27-14" id="__codelineno-27-14" name="__codelineno-27-14"></a>   macro avg       0.75      0.96      0.81        30
</span><span id="__span-27-15"><a href="index.html#__codelineno-27-15" id="__codelineno-27-15" name="__codelineno-27-15"></a>weighted avg       0.97      0.93      0.94        30
</span></code></pre></div></p>
<p><div class="language-python highlight"><pre><span></span><code><span id="__span-28-1"><a href="index.html#__codelineno-28-1" id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="n">print_metrics</span><span class="p">(</span><span class="n">groundtruth</span><span class="p">,</span> <span class="n">gemini_1_5_flash_prediction</span><span class="p">,</span> <span class="n">model_name</span><span class="o">=</span><span class="s2">"Gemini 1.5 Flash"</span><span class="p">)</span>
</span></code></pre></div>
Output
<div class="language-text highlight"><pre><span></span><code><span id="__span-29-1"><a href="index.html#__codelineno-29-1" id="__codelineno-29-1" name="__codelineno-29-1"></a>Metrics for Gemini 1.5 Flash:
</span><span id="__span-29-2"><a href="index.html#__codelineno-29-2" id="__codelineno-29-2" name="__codelineno-29-2"></a>Accuracy: 0.9
</span><span id="__span-29-3"><a href="index.html#__codelineno-29-3" id="__codelineno-29-3" name="__codelineno-29-3"></a>Precision: 0.3333333333333333
</span><span id="__span-29-4"><a href="index.html#__codelineno-29-4" id="__codelineno-29-4" name="__codelineno-29-4"></a>Recall: 0.5
</span><span id="__span-29-5"><a href="index.html#__codelineno-29-5" id="__codelineno-29-5" name="__codelineno-29-5"></a>F1 Score: 0.4
</span><span id="__span-29-6"><a href="index.html#__codelineno-29-6" id="__codelineno-29-6" name="__codelineno-29-6"></a>
</span><span id="__span-29-7"><a href="index.html#__codelineno-29-7" id="__codelineno-29-7" name="__codelineno-29-7"></a>Classification Report:
</span><span id="__span-29-8"><a href="index.html#__codelineno-29-8" id="__codelineno-29-8" name="__codelineno-29-8"></a>              precision    recall  f1-score   support
</span><span id="__span-29-9"><a href="index.html#__codelineno-29-9" id="__codelineno-29-9" name="__codelineno-29-9"></a>
</span><span id="__span-29-10"><a href="index.html#__codelineno-29-10" id="__codelineno-29-10" name="__codelineno-29-10"></a>           0       0.96      0.93      0.95        28
</span><span id="__span-29-11"><a href="index.html#__codelineno-29-11" id="__codelineno-29-11" name="__codelineno-29-11"></a>           1       0.33      0.50      0.40         2
</span><span id="__span-29-12"><a href="index.html#__codelineno-29-12" id="__codelineno-29-12" name="__codelineno-29-12"></a>
</span><span id="__span-29-13"><a href="index.html#__codelineno-29-13" id="__codelineno-29-13" name="__codelineno-29-13"></a>    accuracy                           0.90        30
</span><span id="__span-29-14"><a href="index.html#__codelineno-29-14" id="__codelineno-29-14" name="__codelineno-29-14"></a>   macro avg       0.65      0.71      0.67        30
</span><span id="__span-29-15"><a href="index.html#__codelineno-29-15" id="__codelineno-29-15" name="__codelineno-29-15"></a>weighted avg       0.92      0.90      0.91        30
</span></code></pre></div></p>
<p>Gemini 2.0 Flash also outperforms Gemini 1.5 Flash in identifying unanswerable questions.</p>
<h2 id="whats-next">What's Next</h2>
<p>You can benchmark your models on any dataset using Zibly metrics as long as the dataset is formatted to Zibly EvaluationDatase. Try benchmarking your models on a variety of established benchmarking datasets.  </p>
<ul>
<li><a href="https://huggingface.co/datasets/qiaojin/PubMedQA">PubMedQA</a></li>
<li><a href="https://huggingface.co/datasets/yixuantt/MultiHopRAG">MultiHopRAG</a></li>
<li><a href="https://huggingface.co/datasets/microsoft/ms_marco">ms_marco</a></li>
</ul>
<p>And many more.</p>
<aside class="md-source-file">
<span class="md-source-file__fact">
<span class="md-icon" title="Last update">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg>
</span>
<span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="March 27, 2025 18:59:05">March 27, 2025</span>
</span>
<span class="md-source-file__fact">
<span class="md-icon" title="Created">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"></path></svg>
</span>
<span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="March 27, 2025 18:59:05">March 27, 2025</span>
</span>
<span class="md-source-file__fact">
<span class="md-icon" title="Contributors">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path></svg>
</span>
<span>GitHub</span>
<nav>
<a class="md-author" href="https://github.com/sahusiddharth" title="@sahusiddharth">
<img alt="sahusiddharth" src="https://avatars.githubusercontent.com/u/112792547?v=4&amp;size=72"/>
</a>
<a class="md-author" href="https://github.com/web-flow" title="@web-flow">
<img alt="web-flow" src="https://avatars.githubusercontent.com/u/19864447?v=4&amp;size=72"/>
</a>
</nav>
</span>
</aside>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Single-hop Query Testset" class="md-footer__link md-footer__link--prev" href="../singlehop_testset_gen/index.html">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                Single-hop Query Testset
              </div>
</div>
</a>
<a aria-label="Next: Integrations" class="md-footer__link md-footer__link--next" href="../../integrations/index.html">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                Integrations
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs Insiders
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["announce.dismiss", "content.tabs.link", "content.code.annotate", "content.code.copy", "announce.dismiss", "navigation.tabs", "navigation.path", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.preview", "navigation.sections", "navigation.top", "navigation.tracking", "navigation.indexes", "navigation.footer", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.c7c1ca2c.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
<script src="../../../assets/javascripts/bundle.f807c082.min.js"></script>
<script src="../../../static/js/mathjax.js"></script>
<script src="../../../static/js/header_border.js"></script>
<script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="../../../static/js/toggle.js"></script>
<script src="https://cdn.octolane.com/tag.js?pk=c7c9b2b863bf7eaf4e2a"></script>
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>